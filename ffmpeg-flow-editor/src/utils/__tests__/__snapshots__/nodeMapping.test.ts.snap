// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Node Mapping > should handle 'test_compile_json[amix-stream][compil…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "amix",
      "nodeType": "filter",
    },
    "node-3" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-4" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
    },
    "node-5" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-6" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-7" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
    },
    "node-8" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-9" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AudioStream",
                            "index": 0,
                            "node": {
                              "__class__": "FilterNode",
                              "input_typings": [
                                {
                                  "__class__": "StreamType",
                                  "value": "audio",
                                },
                              ],
                              "inputs": [
                                {
                                  "__class__": "AVStream",
                                  "index": null,
                                  "node": {
                                    "__class__": "InputNode",
                                    "filename": "input1.mp4",
                                    "inputs": [],
                                    "kwargs": {},
                                  },
                                },
                              ],
                              "kwargs": {},
                              "name": "areverse",
                              "output_typings": [
                                {
                                  "__class__": "StreamType",
                                  "value": "audio",
                                },
                              ],
                            },
                          },
                        ],
                        "kwargs": {
                          "outputs": 2,
                        },
                        "name": "asplit",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-5" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-6" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-8" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-9" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-6-0-node-5-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-5-0-node-4-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-4-1-node-3-0" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-9-0-node-8-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-7-0-node-2-1" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AudioStream",
                        "index": 0,
                        "node": {
                          "__class__": "FilterNode",
                          "input_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                          "inputs": [
                            {
                              "__class__": "AVStream",
                              "index": null,
                              "node": {
                                "__class__": "InputNode",
                                "filename": "input1.mp4",
                                "inputs": [],
                                "kwargs": {},
                              },
                            },
                          ],
                          "kwargs": {},
                          "name": "areverse",
                          "output_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                        },
                      },
                    ],
                    "kwargs": {
                      "outputs": 2,
                    },
                    "name": "asplit",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-5",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-8",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AudioStream",
                        "index": 0,
                        "node": {
                          "__class__": "FilterNode",
                          "input_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                          "inputs": [
                            {
                              "__class__": "AVStream",
                              "index": null,
                              "node": {
                                "__class__": "InputNode",
                                "filename": "input1.mp4",
                                "inputs": [],
                                "kwargs": {},
                              },
                            },
                          ],
                          "kwargs": {},
                          "name": "areverse",
                          "output_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                        },
                      },
                    ],
                    "kwargs": {
                      "outputs": 2,
                    },
                    "name": "asplit",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream][compil…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream-2][comp…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "amix",
      "nodeType": "filter",
    },
    "node-3" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
    },
    "node-4" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-5" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-7" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
    },
    "node-8" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-9" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AudioStream",
                            "index": 0,
                            "node": {
                              "__class__": "FilterNode",
                              "input_typings": [
                                {
                                  "__class__": "StreamType",
                                  "value": "audio",
                                },
                              ],
                              "inputs": [
                                {
                                  "__class__": "AVStream",
                                  "index": null,
                                  "node": {
                                    "__class__": "InputNode",
                                    "filename": "input1.mp4",
                                    "inputs": [],
                                    "kwargs": {},
                                  },
                                },
                              ],
                              "kwargs": {},
                              "name": "areverse",
                              "output_typings": [
                                {
                                  "__class__": "StreamType",
                                  "value": "audio",
                                },
                              ],
                            },
                          },
                        ],
                        "kwargs": {
                          "outputs": 2,
                        },
                        "name": "asplit",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-8" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-9" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream-2][comp…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-5-0-node-4-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-9-0-node-8-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-7-1-node-6-0" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-6-0-node-2-1" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AudioStream",
                        "index": 0,
                        "node": {
                          "__class__": "FilterNode",
                          "input_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                          "inputs": [
                            {
                              "__class__": "AVStream",
                              "index": null,
                              "node": {
                                "__class__": "InputNode",
                                "filename": "input1.mp4",
                                "inputs": [],
                                "kwargs": {},
                              },
                            },
                          ],
                          "kwargs": {},
                          "name": "areverse",
                          "output_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                        },
                      },
                    ],
                    "kwargs": {
                      "outputs": 2,
                    },
                    "name": "asplit",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-8",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AudioStream",
                        "index": 0,
                        "node": {
                          "__class__": "FilterNode",
                          "input_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                          "inputs": [
                            {
                              "__class__": "AVStream",
                              "index": null,
                              "node": {
                                "__class__": "InputNode",
                                "filename": "input1.mp4",
                                "inputs": [],
                                "kwargs": {},
                              },
                            },
                          ],
                          "kwargs": {},
                          "name": "areverse",
                          "output_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                        },
                      },
                    ],
                    "kwargs": {
                      "outputs": 2,
                    },
                    "name": "asplit",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream-2][comp…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[complex-stream][com…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-audio",
            "type": "audio",
          },
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
    },
    "node-3" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-4" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-5" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
    },
    "node-7" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-8" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-9" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-10" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-11" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-12" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
    },
    "node-13" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-14" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-15" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-audio",
            "type": "audio",
          },
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
    },
    "node-16" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-17" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-18" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-19" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
    },
    "node-20" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-21" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-22" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-23" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-24" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-25" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
    },
    "node-26" => {
      "handles": {
        "inputs": [
          {
            "id": "input-audio",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-audio",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
    },
    "node-27" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-8" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-9" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-10" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-11" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-12" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-13" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-14" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-15" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-16" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-17" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-18" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-19" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-20" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-21" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-22" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-23" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-24" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-25" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-26" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-27" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[complex-stream][com…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-5-0-node-4-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-7-0-node-6-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-6-0-node-2-1" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-11-0-node-10-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-10-0-node-9-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-9-1-node-2-2" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-14-0-node-13-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-13-0-node-12-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-12-1-node-2-3" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-18-0-node-17-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-17-0-node-16-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-16-0-node-15-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-21-0-node-20-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-20-0-node-19-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-19-0-node-15-1" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-24-0-node-23-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-23-0-node-22-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-22-1-node-15-2" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-27-0-node-26-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-26-0-node-25-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-25-1-node-15-3" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-15-1-node-1-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-10",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-9",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 2,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-13",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-12",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 3,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-17",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-16",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-15",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-20",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-19",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-15",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-23",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-22",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 2,
      "nodeId": "node-15",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-26",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-25",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 3,
      "nodeId": "node-15",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[complex-stream][com…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[global-args][compil…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-2-0-node-1-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-1-0-node-0-0" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "tmp.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "tmp.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-0",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args][compil…' case 3`] = `"{"kwargs":{"hide_banner":true},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"filename":"tmp.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"}],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[global-args-2][comp…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args-2][comp…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-2-0-node-1-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-1-0-node-0-0" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "tmp.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "tmp.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-0",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args-2][comp…' case 3`] = `"{"kwargs":{"dump":true,"hide_banner":true},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"filename":"tmp.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"}],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[merged-output-1][co…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "output1.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-3" => {
      "filename": "output2.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-4" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "output1.mp4",
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-3" => {
      "__class__": "OutputNode",
      "filename": "output2.mp4",
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-4" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[merged-output-1][co…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-2-0-node-1-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-1-0-node-0-0" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output1.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-3-0-node-0-1" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output2.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output1.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-0",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output2.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-0",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[merged-output-1][co…' case 3`] = `"{"kwargs":{"dump":true},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"filename":"output1.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"},{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input2.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"filename":"output2.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"}],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[multi-output-filter…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "output1.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "drawtext",
      "nodeType": "filter",
    },
    "node-3" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "feedback",
      "nodeType": "filter",
    },
    "node-4" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-5" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "filename": "output2.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-7" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "drawtext",
      "nodeType": "filter",
    },
    "node-8" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "feedback",
      "nodeType": "filter",
    },
    "node-9" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-10" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "output1.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "feedback",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "fontsize": 12,
              "text": "Hello World",
              "x": 10,
              "y": 10,
            },
            "name": "drawtext",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "feedback",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "fontsize": 12,
        "text": "Hello World",
        "x": 10,
        "y": 10,
      },
      "name": "drawtext",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "feedback",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-4" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "OutputNode",
      "filename": "output2.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "feedback",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "fontsize": 12,
              "text": "Hello World",
              "x": 10,
              "y": 10,
            },
            "name": "drawtext",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "feedback",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "fontsize": 12,
        "text": "Hello World",
        "x": 10,
        "y": 10,
      },
      "name": "drawtext",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-8" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "feedback",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-9" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-10" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[multi-output-filter…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-4-0-node-3-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-5-0-node-3-1" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "feedback",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "feedback",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "fontsize": 12,
          "text": "Hello World",
          "x": 10,
          "y": 10,
        },
        "name": "drawtext",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-1-0-node-0-0" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output1.mp4",
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "feedback",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "fontsize": 12,
                "text": "Hello World",
                "x": 10,
                "y": 10,
              },
              "name": "drawtext",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {},
      },
    },
    "edge-node-9-0-node-8-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-10-0-node-8-1" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-8-1-node-7-0" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "feedback",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-7-0-node-6-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "feedback",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "fontsize": 12,
          "text": "Hello World",
          "x": 10,
          "y": 10,
        },
        "name": "drawtext",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-6-0-node-0-1" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output2.mp4",
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "feedback",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "fontsize": 12,
                "text": "Hello World",
                "x": 10,
                "y": 10,
              },
              "name": "drawtext",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "feedback",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "feedback",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "fontsize": 12,
          "text": "Hello World",
          "x": 10,
          "y": 10,
        },
        "name": "drawtext",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output1.mp4",
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "feedback",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "fontsize": 12,
                "text": "Hello World",
                "x": 10,
                "y": 10,
              },
              "name": "drawtext",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-0",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-8",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-8",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "feedback",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "feedback",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "fontsize": 12,
          "text": "Hello World",
          "x": 10,
          "y": 10,
        },
        "name": "drawtext",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output2.mp4",
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "feedback",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "fontsize": 12,
                "text": "Hello World",
                "x": 10,
                "y": 10,
              },
              "name": "drawtext",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-0",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[multi-output-filter…' case 3`] = `"{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{"fontsize":12,"text":"Hello World","x":10,"y":10},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"},{"node":{"kwargs":{},"inputs":[],"filename":"input2.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"name":"feedback","input_typings":[{"value":"video","__class__":"StreamType"},{"value":"video","__class__":"StreamType"}],"output_typings":[{"value":"video","__class__":"StreamType"},{"value":"video","__class__":"StreamType"}],"__class__":"FilterNode"},"index":0,"__class__":"VideoStream"}],"name":"drawtext","input_typings":[{"value":"video","__class__":"StreamType"}],"output_typings":[{"value":"video","__class__":"StreamType"}],"__class__":"FilterNode"},"index":0,"__class__":"VideoStream"}],"filename":"output1.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"},{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{"fontsize":12,"text":"Hello World","x":10,"y":10},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"},{"node":{"kwargs":{},"inputs":[],"filename":"input2.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"name":"feedback","input_typings":[{"value":"video","__class__":"StreamType"},{"value":"video","__class__":"StreamType"}],"output_typings":[{"value":"video","__class__":"StreamType"},{"value":"video","__class__":"StreamType"}],"__class__":"FilterNode"},"index":1,"__class__":"VideoStream"}],"name":"drawtext","input_typings":[{"value":"video","__class__":"StreamType"}],"output_typings":[{"value":"video","__class__":"StreamType"}],"__class__":"FilterNode"},"index":0,"__class__":"VideoStream"}],"filename":"output2.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"}],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[not-utilize-split][…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-3" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[not-utilize-split][…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-3-0-node-2-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[not-utilize-split][…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-dup…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
    },
    "node-3" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-4" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-5" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-7" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-8" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-9" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-10" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-11" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 3,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 3,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 2,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 3,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 3,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 3,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 2,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 3,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 3,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 3,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-8" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-9" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 3,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-10" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-11" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-dup…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-5-0-node-4-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-7-0-node-6-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-6-1-node-2-1" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-11-0-node-10-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-10-0-node-9-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-9-2-node-2-2" => {
      "__class__": "VideoStream",
      "index": 2,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 2,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-10",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-9",
    },
    {
      "__class__": "VideoStream",
      "index": 2,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 2,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 2,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-dup…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-out…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-3" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-out…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-3-0-node-2-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-out…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-input][compil…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
    },
    "node-3" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-4" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-4" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-input][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-3-0-node-2-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-2-1" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-input][compil…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-stream][compi…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
    },
    "node-3" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-4" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-5" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
    },
    "node-7" => {
      "handles": {
        "inputs": [
          {
            "id": "input-video",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-video",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
    },
    "node-8" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-8" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-stream][compi…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-5-0-node-4-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-7-0-node-6-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-6-1-node-2-1" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-stream][compi…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;
