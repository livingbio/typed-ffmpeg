// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Node Mapping > should handle 'test_compile_json[amix-stream][compil…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream-2][comp…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream-2][comp…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[complex-stream][com…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[complex-stream][com…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args][compil…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "global-ep2smkm55" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    } => "global-ep2smkm55",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args-2][comp…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args-2][comp…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[merged-output-1][co…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "global-ep2smkm55" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "global-qiafvpwho" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    } => "global-ep2smkm55",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    } => "global-qiafvpwho",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[merged-output-1][co…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[multi-output-filter…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "global-ep2smkm55" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "global-qiafvpwho" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
    "global-gqvn67vlw" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    } => "global-ep2smkm55",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    } => "global-qiafvpwho",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    } => "global-gqvn67vlw",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[multi-output-filter…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[not-utilize-split][…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "global-ep2smkm55" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "global-qiafvpwho" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
    "global-gqvn67vlw" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "output-r1k2hho6u" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-reverse-xxhaq6uw1" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    } => "global-ep2smkm55",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    } => "global-qiafvpwho",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    } => "global-gqvn67vlw",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-r1k2hho6u",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-reverse-xxhaq6uw1",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[not-utilize-split][…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-r1k2hho6u",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-dup…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "global-ep2smkm55" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "global-qiafvpwho" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
    "global-gqvn67vlw" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "output-r1k2hho6u" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-reverse-xxhaq6uw1" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-oxsnu1fpq" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
              null,
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-jqf8el8oe" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
        null,
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    } => "global-ep2smkm55",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    } => "global-qiafvpwho",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    } => "global-gqvn67vlw",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-r1k2hho6u",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-reverse-xxhaq6uw1",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
              null,
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-oxsnu1fpq",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
        null,
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-concat-jqf8el8oe",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-dup…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-concat-jqf8el8oe-0-output-oxsnu1fpq-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-concat-jqf8el8oe-0-output-oxsnu1fpq-0",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-r1k2hho6u",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-oxsnu1fpq",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-out…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "global-ep2smkm55" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "global-qiafvpwho" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
    "global-gqvn67vlw" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "output-r1k2hho6u" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-reverse-xxhaq6uw1" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-oxsnu1fpq" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
              null,
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-jqf8el8oe" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
        null,
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-9ya5lvqqr" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-reverse-916quds6f" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    } => "global-ep2smkm55",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    } => "global-qiafvpwho",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    } => "global-gqvn67vlw",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-r1k2hho6u",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-reverse-xxhaq6uw1",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
              null,
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-oxsnu1fpq",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
        null,
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-concat-jqf8el8oe",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-9ya5lvqqr",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-reverse-916quds6f",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-out…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-concat-jqf8el8oe-0-output-oxsnu1fpq-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-reverse-916quds6f-0-output-9ya5lvqqr-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-concat-jqf8el8oe-0-output-oxsnu1fpq-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-reverse-916quds6f-0-output-9ya5lvqqr-0",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-r1k2hho6u",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-oxsnu1fpq",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-9ya5lvqqr",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-input][compil…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "global-ep2smkm55" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "global-qiafvpwho" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
    "global-gqvn67vlw" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "output-r1k2hho6u" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-reverse-xxhaq6uw1" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-oxsnu1fpq" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
              null,
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-jqf8el8oe" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
        null,
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-9ya5lvqqr" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-reverse-916quds6f" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-rq4w5myck" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-ktb5wfz1i" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    } => "global-ep2smkm55",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    } => "global-qiafvpwho",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    } => "global-gqvn67vlw",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-r1k2hho6u",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-reverse-xxhaq6uw1",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
              null,
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-oxsnu1fpq",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
        null,
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-concat-jqf8el8oe",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-9ya5lvqqr",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-reverse-916quds6f",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-rq4w5myck",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-concat-ktb5wfz1i",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-input][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-concat-jqf8el8oe-0-output-oxsnu1fpq-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-reverse-916quds6f-0-output-9ya5lvqqr-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-concat-ktb5wfz1i-0-output-rq4w5myck-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-concat-jqf8el8oe-0-output-oxsnu1fpq-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-reverse-916quds6f-0-output-9ya5lvqqr-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-concat-ktb5wfz1i-0-output-rq4w5myck-0",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-r1k2hho6u",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-oxsnu1fpq",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-9ya5lvqqr",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-rq4w5myck",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-stream][compi…' case 1`] = `
{
  "nodeMap": Map {
    "output-auxivolw1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-odpbfnn8w" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-jymh4aglh" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-amix-r9s7iygrp" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "output-1ome70od3" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-0fpgx0nbx" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "filter-concat-4ihnqys9q" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "global-0h1ixpvnv" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "global-ep2smkm55" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "global-qiafvpwho" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
    "global-gqvn67vlw" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "output-r1k2hho6u" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-reverse-xxhaq6uw1" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-oxsnu1fpq" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
              null,
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-jqf8el8oe" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
        null,
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-9ya5lvqqr" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-reverse-916quds6f" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-rq4w5myck" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-ktb5wfz1i" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "output-96b9n20sp" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "filter-concat-9dj53j4qn" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
  },
  "reverseMap": Map {
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-auxivolw1",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-odpbfnn8w",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-jymh4aglh",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-amix-r9s7iygrp",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              null,
              null,
              null,
              null,
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-1ome70od3",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-0fpgx0nbx",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        null,
        null,
        null,
        null,
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    } => "filter-concat-4ihnqys9q",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    } => "global-0h1ixpvnv",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    } => "global-ep2smkm55",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    } => "global-qiafvpwho",
    {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": null,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    } => "global-gqvn67vlw",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-r1k2hho6u",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-reverse-xxhaq6uw1",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
              null,
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-oxsnu1fpq",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
        null,
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-concat-jqf8el8oe",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-9ya5lvqqr",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-reverse-916quds6f",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-rq4w5myck",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-concat-ktb5wfz1i",
    {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              null,
              null,
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    } => "output-96b9n20sp",
    {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        null,
        null,
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    } => "filter-concat-9dj53j4qn",
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-stream][compi…' case 2`] = `
{
  "edgeMap": Map {
    "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-concat-jqf8el8oe-0-output-oxsnu1fpq-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-reverse-916quds6f-0-output-9ya5lvqqr-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-concat-ktb5wfz1i-0-output-rq4w5myck-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-filter-concat-9dj53j4qn-0-output-96b9n20sp-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "reverseMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-odpbfnn8w-0-output-auxivolw1-0",
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-amix-r9s7iygrp-0-output-jymh4aglh-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-0fpgx0nbx-0-output-1ome70od3-0",
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => "edge-filter-concat-4ihnqys9q-1-output-1ome70od3-1",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-reverse-xxhaq6uw1-0-output-r1k2hho6u-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-concat-jqf8el8oe-0-output-oxsnu1fpq-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-reverse-916quds6f-0-output-9ya5lvqqr-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-concat-ktb5wfz1i-0-output-rq4w5myck-0",
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => "edge-filter-concat-9dj53j4qn-0-output-96b9n20sp-0",
  },
  "targetMap": Map {
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-auxivolw1",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-jymh4aglh",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          null,
          null,
          null,
          null,
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "output-1ome70od3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-r1k2hho6u",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
          null,
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-oxsnu1fpq",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-9ya5lvqqr",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-rq4w5myck",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          null,
          null,
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "output-96b9n20sp",
    },
  },
}
`;
