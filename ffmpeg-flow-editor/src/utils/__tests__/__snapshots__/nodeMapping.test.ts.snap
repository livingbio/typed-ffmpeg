// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Node Mapping > should handle 'test_compile_json[amix-stream][compil…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Audio mixing.",
        "formula_typings_input": "[StreamType.audio] * int(inputs)",
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": true,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "amix",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "inputs",
            ],
            "choices": [],
            "default": 2,
            "description": "Number of inputs. (from 1 to 32767) (default 2)",
            "flags": "..F.A......",
            "max": "32767",
            "min": "1",
            "name": "inputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "duration",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..F.A......",
                "help": "Duration of longest input.",
                "name": "longest",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..F.A......",
                "help": "Duration of shortest input.",
                "name": "shortest",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..F.A......",
                "help": "Duration of first input.",
                "name": "first",
                "value": "2",
              },
            ],
            "default": "longest",
            "description": "How to determine the end-of-stream. (from 0 to 2) (default longest)",
            "flags": "..F.A......",
            "max": "2",
            "min": "0",
            "name": "duration",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "dropout_transition",
            ],
            "choices": [],
            "default": 2,
            "description": "Transition time, in seconds, for volume renormalization when an input stream ends. (from 0 to INT_MAX) (default 2)",
            "flags": "..F.A......",
            "max": "INT_MAX",
            "min": "0",
            "name": "dropout_transition",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "float",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "weights",
            ],
            "choices": [],
            "default": "1 1",
            "description": "Set weight for each input. (default "1 1")",
            "flags": "..F.A....T.",
            "max": null,
            "min": null,
            "name": "weights",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "normalize",
            ],
            "choices": [],
            "default": true,
            "description": "Scale inputs (default true)",
            "flags": "..F.A....T.",
            "max": null,
            "min": null,
            "name": "normalize",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
        ],
        "pre": {
          "inputs": "len(streams)",
        },
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#amix",
        "stream_typings_input": [],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "amix",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
          {
            "id": "input-1",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "amix",
      "nodeType": "filter",
      "parameters": {
        "duration": "first",
        "inputs": 2,
      },
    },
    "node-3" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-4" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the audio input to N audio outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.audio] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "asplit",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "asplit",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-5" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-6" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-7" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the audio input to N audio outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.audio] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "asplit",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "asplit",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-8" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-9" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AudioStream",
                            "index": 0,
                            "node": {
                              "__class__": "FilterNode",
                              "input_typings": [
                                {
                                  "__class__": "StreamType",
                                  "value": "audio",
                                },
                              ],
                              "inputs": [
                                {
                                  "__class__": "AVStream",
                                  "index": null,
                                  "node": {
                                    "__class__": "InputNode",
                                    "filename": "input1.mp4",
                                    "inputs": [],
                                    "kwargs": {},
                                  },
                                },
                              ],
                              "kwargs": {},
                              "name": "areverse",
                              "output_typings": [
                                {
                                  "__class__": "StreamType",
                                  "value": "audio",
                                },
                              ],
                            },
                          },
                        ],
                        "kwargs": {
                          "outputs": 2,
                        },
                        "name": "asplit",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-5" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-6" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-8" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-9" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-6-0-node-5-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-5-0-node-4-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-4-1-node-3-0" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-9-0-node-8-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-7-0-node-2-1" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AudioStream",
                        "index": 0,
                        "node": {
                          "__class__": "FilterNode",
                          "input_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                          "inputs": [
                            {
                              "__class__": "AVStream",
                              "index": null,
                              "node": {
                                "__class__": "InputNode",
                                "filename": "input1.mp4",
                                "inputs": [],
                                "kwargs": {},
                              },
                            },
                          ],
                          "kwargs": {},
                          "name": "areverse",
                          "output_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                        },
                      },
                    ],
                    "kwargs": {
                      "outputs": 2,
                    },
                    "name": "asplit",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-5",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-8",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AudioStream",
                        "index": 0,
                        "node": {
                          "__class__": "FilterNode",
                          "input_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                          "inputs": [
                            {
                              "__class__": "AVStream",
                              "index": null,
                              "node": {
                                "__class__": "InputNode",
                                "filename": "input1.mp4",
                                "inputs": [],
                                "kwargs": {},
                              },
                            },
                          ],
                          "kwargs": {},
                          "name": "areverse",
                          "output_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                        },
                      },
                    ],
                    "kwargs": {
                      "outputs": 2,
                    },
                    "name": "asplit",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream][compil…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream-2][comp…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Audio mixing.",
        "formula_typings_input": "[StreamType.audio] * int(inputs)",
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": true,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "amix",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "inputs",
            ],
            "choices": [],
            "default": 2,
            "description": "Number of inputs. (from 1 to 32767) (default 2)",
            "flags": "..F.A......",
            "max": "32767",
            "min": "1",
            "name": "inputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "duration",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..F.A......",
                "help": "Duration of longest input.",
                "name": "longest",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..F.A......",
                "help": "Duration of shortest input.",
                "name": "shortest",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..F.A......",
                "help": "Duration of first input.",
                "name": "first",
                "value": "2",
              },
            ],
            "default": "longest",
            "description": "How to determine the end-of-stream. (from 0 to 2) (default longest)",
            "flags": "..F.A......",
            "max": "2",
            "min": "0",
            "name": "duration",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "dropout_transition",
            ],
            "choices": [],
            "default": 2,
            "description": "Transition time, in seconds, for volume renormalization when an input stream ends. (from 0 to INT_MAX) (default 2)",
            "flags": "..F.A......",
            "max": "INT_MAX",
            "min": "0",
            "name": "dropout_transition",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "float",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "weights",
            ],
            "choices": [],
            "default": "1 1",
            "description": "Set weight for each input. (default "1 1")",
            "flags": "..F.A....T.",
            "max": null,
            "min": null,
            "name": "weights",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "normalize",
            ],
            "choices": [],
            "default": true,
            "description": "Scale inputs (default true)",
            "flags": "..F.A....T.",
            "max": null,
            "min": null,
            "name": "normalize",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
        ],
        "pre": {
          "inputs": "len(streams)",
        },
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#amix",
        "stream_typings_input": [],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "amix",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
          {
            "id": "input-1",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "amix",
      "nodeType": "filter",
      "parameters": {
        "duration": "first",
        "inputs": 2,
      },
    },
    "node-3" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the audio input to N audio outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.audio] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "asplit",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "asplit",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-4" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-5" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-7" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the audio input to N audio outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.audio] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "asplit",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "asplit",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-8" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-9" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AudioStream",
                            "index": 0,
                            "node": {
                              "__class__": "FilterNode",
                              "input_typings": [
                                {
                                  "__class__": "StreamType",
                                  "value": "audio",
                                },
                              ],
                              "inputs": [
                                {
                                  "__class__": "AVStream",
                                  "index": null,
                                  "node": {
                                    "__class__": "InputNode",
                                    "filename": "input1.mp4",
                                    "inputs": [],
                                    "kwargs": {},
                                  },
                                },
                              ],
                              "kwargs": {},
                              "name": "areverse",
                              "output_typings": [
                                {
                                  "__class__": "StreamType",
                                  "value": "audio",
                                },
                              ],
                            },
                          },
                        ],
                        "kwargs": {
                          "outputs": 2,
                        },
                        "name": "asplit",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "duration": "first",
              "inputs": 2,
            },
            "name": "amix",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "duration": "first",
        "inputs": 2,
      },
      "name": "amix",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-8" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-9" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream-2][comp…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-5-0-node-4-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-9-0-node-8-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-7-1-node-6-0" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-6-0-node-2-1" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AudioStream",
                        "index": 0,
                        "node": {
                          "__class__": "FilterNode",
                          "input_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                          "inputs": [
                            {
                              "__class__": "AVStream",
                              "index": null,
                              "node": {
                                "__class__": "InputNode",
                                "filename": "input1.mp4",
                                "inputs": [],
                                "kwargs": {},
                              },
                            },
                          ],
                          "kwargs": {},
                          "name": "areverse",
                          "output_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                        },
                      },
                    ],
                    "kwargs": {
                      "outputs": 2,
                    },
                    "name": "asplit",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-8",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AudioStream",
                        "index": 0,
                        "node": {
                          "__class__": "FilterNode",
                          "input_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                          "inputs": [
                            {
                              "__class__": "AVStream",
                              "index": null,
                              "node": {
                                "__class__": "InputNode",
                                "filename": "input1.mp4",
                                "inputs": [],
                                "kwargs": {},
                              },
                            },
                          ],
                          "kwargs": {},
                          "name": "areverse",
                          "output_typings": [
                            {
                              "__class__": "StreamType",
                              "value": "audio",
                            },
                          ],
                        },
                      },
                    ],
                    "kwargs": {
                      "outputs": 2,
                    },
                    "name": "asplit",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "duration": "first",
          "inputs": 2,
        },
        "name": "amix",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[amix-stream-2][comp…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[complex-stream][com…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Concatenate audio and video streams.",
        "formula_typings_input": "([StreamType.video]*int(v) + [StreamType.audio]*int(a))*int(n)",
        "formula_typings_output": "[StreamType.video]*int(v) + [StreamType.audio]*int(a)",
        "id": null,
        "is_dynamic_input": true,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "concat",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "n",
            ],
            "choices": [],
            "default": 2,
            "description": "specify the number of segments (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "n",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "v",
            ],
            "choices": [],
            "default": 1,
            "description": "specify the number of video streams (from 0 to INT_MAX) (default 1)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "v",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "a",
            ],
            "choices": [],
            "default": 0,
            "description": "specify the number of audio streams (from 0 to INT_MAX) (default 0)",
            "flags": "..F.A......",
            "max": "INT_MAX",
            "min": "0",
            "name": "a",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "unsafe",
            ],
            "choices": [],
            "default": false,
            "description": "enable unsafe mode (default false)",
            "flags": "..FVA......",
            "max": null,
            "min": null,
            "name": "unsafe",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
        ],
        "pre": {
          "n": "len(streams) // (int(v) + int(a))",
        },
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#concat",
        "stream_typings_input": [],
        "stream_typings_output": [],
      },
      "filterName": "concat",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
          {
            "id": "input-1",
            "type": "audio",
          },
          {
            "id": "input-2",
            "type": "video",
          },
          {
            "id": "input-3",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
      "parameters": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
    },
    "node-3" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-4" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-5" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the audio input to N audio outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.audio] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "asplit",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "asplit",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-7" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-8" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-9" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-10" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-11" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-12" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the audio input to N audio outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.audio] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "asplit",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "asplit",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-13" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-14" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-15" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Concatenate audio and video streams.",
        "formula_typings_input": "([StreamType.video]*int(v) + [StreamType.audio]*int(a))*int(n)",
        "formula_typings_output": "[StreamType.video]*int(v) + [StreamType.audio]*int(a)",
        "id": null,
        "is_dynamic_input": true,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "concat",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "n",
            ],
            "choices": [],
            "default": 2,
            "description": "specify the number of segments (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "n",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "v",
            ],
            "choices": [],
            "default": 1,
            "description": "specify the number of video streams (from 0 to INT_MAX) (default 1)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "v",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "a",
            ],
            "choices": [],
            "default": 0,
            "description": "specify the number of audio streams (from 0 to INT_MAX) (default 0)",
            "flags": "..F.A......",
            "max": "INT_MAX",
            "min": "0",
            "name": "a",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "unsafe",
            ],
            "choices": [],
            "default": false,
            "description": "enable unsafe mode (default false)",
            "flags": "..FVA......",
            "max": null,
            "min": null,
            "name": "unsafe",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
        ],
        "pre": {
          "n": "len(streams) // (int(v) + int(a))",
        },
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#concat",
        "stream_typings_input": [],
        "stream_typings_output": [],
      },
      "filterName": "concat",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
          {
            "id": "input-1",
            "type": "audio",
          },
          {
            "id": "input-2",
            "type": "video",
          },
          {
            "id": "input-3",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
      "parameters": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
    },
    "node-16" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-17" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-18" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-19" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the audio input to N audio outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.audio] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "asplit",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "asplit",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-20" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-21" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-22" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-23" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-24" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-25" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the audio input to N audio outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.audio] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "asplit",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "asplit",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
          {
            "id": "output-1",
            "type": "audio",
          },
        ],
      },
      "label": "asplit",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-26" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse an audio clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "areverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#areverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "audio",
            },
          },
        ],
      },
      "filterName": "areverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "audio",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "audio",
          },
        ],
      },
      "label": "areverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-27" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "AudioStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AudioStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "areverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "audio",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "asplit",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "a": 1,
              "n": 2,
              "v": 1,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-8" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-9" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-10" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-11" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-12" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-13" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-14" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-15" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "AudioStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AudioStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "areverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "audio",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "asplit",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "a": 1,
        "n": 2,
        "v": 1,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-16" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-17" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-18" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-19" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-20" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-21" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-22" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-23" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-24" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-25" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AudioStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "areverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "audio",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "asplit",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-26" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "areverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "audio",
        },
      ],
    },
    "node-27" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[complex-stream][com…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-5-0-node-4-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-7-0-node-6-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-6-0-node-2-1" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-11-0-node-10-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-10-0-node-9-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-9-1-node-2-2" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-14-0-node-13-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-13-0-node-12-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-12-1-node-2-3" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-18-0-node-17-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-17-0-node-16-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-16-0-node-15-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-21-0-node-20-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-20-0-node-19-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-19-0-node-15-1" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-24-0-node-23-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-23-0-node-22-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-22-1-node-15-2" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-27-0-node-26-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-26-0-node-25-0" => {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-25-1-node-15-3" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
    "edge-node-15-1-node-1-1" => {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-10",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-9",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 2,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-13",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-12",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 3,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-17",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-16",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-15",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-20",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-19",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-15",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-23",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-22",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 2,
      "nodeId": "node-15",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-26",
    },
    {
      "__class__": "AudioStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "areverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-25",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "areverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "asplit",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 3,
      "nodeId": "node-15",
    },
    {
      "__class__": "AudioStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "AudioStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
              "inputs": [
                {
                  "__class__": "AudioStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "areverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "audio",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "asplit",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
                {
                  "__class__": "StreamType",
                  "value": "audio",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "a": 1,
          "n": 2,
          "v": 1,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "audio",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[complex-stream][com…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[global-args][compil…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "hide_banner": true,
      },
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-2-0-node-1-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-1-0-node-0-0" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "tmp.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "tmp.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-0",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args][compil…' case 3`] = `"{"kwargs":{"hide_banner":true},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"filename":"tmp.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"}],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[global-args-2][comp…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "tmp.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
        "hide_banner": true,
      },
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args-2][comp…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-2-0-node-1-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-1-0-node-0-0" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "tmp.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "tmp.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-0",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[global-args-2][comp…' case 3`] = `"{"kwargs":{"dump":true,"hide_banner":true},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"filename":"tmp.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"}],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[merged-output-1][co…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "output1.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-3" => {
      "filename": "output2.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-4" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "dump": true,
      },
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "output1.mp4",
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-3" => {
      "__class__": "OutputNode",
      "filename": "output2.mp4",
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-4" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[merged-output-1][co…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-2-0-node-1-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-1-0-node-0-0" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output1.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-3-0-node-0-1" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output2.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output1.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-0",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output2.mp4",
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-0",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[merged-output-1][co…' case 3`] = `"{"kwargs":{"dump":true},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"filename":"output1.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"},{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input2.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"filename":"output2.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"}],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[multi-output-filter…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "output1.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Draw text on top of video frames using libfreetype library.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": true,
        "name": "drawtext",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fontfile",
            ],
            "choices": [],
            "default": null,
            "description": "set font file",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fontfile",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "text",
            ],
            "choices": [],
            "default": null,
            "description": "set text",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "text",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "textfile",
            ],
            "choices": [],
            "default": null,
            "description": "set text file",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "textfile",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fontcolor",
            ],
            "choices": [],
            "default": "black",
            "description": "set foreground color (default "black")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fontcolor",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "color",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fontcolor_expr",
            ],
            "choices": [],
            "default": "",
            "description": "set foreground color expression (default "")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fontcolor_expr",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "boxcolor",
            ],
            "choices": [],
            "default": "white",
            "description": "set box color (default "white")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "boxcolor",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "color",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "bordercolor",
            ],
            "choices": [],
            "default": "black",
            "description": "set border color (default "black")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "bordercolor",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "color",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "shadowcolor",
            ],
            "choices": [],
            "default": "black",
            "description": "set shadow color (default "black")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "shadowcolor",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "color",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "box",
            ],
            "choices": [],
            "default": false,
            "description": "set box (default false)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "box",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "boxborderw",
            ],
            "choices": [],
            "default": 0,
            "description": "set box border width (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "boxborderw",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "line_spacing",
            ],
            "choices": [],
            "default": 0,
            "description": "set line spacing in pixels (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "line_spacing",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fontsize",
            ],
            "choices": [],
            "default": null,
            "description": "set font size",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fontsize",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "x",
            ],
            "choices": [],
            "default": "0",
            "description": "set x expression (default "0")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "x",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "y",
            ],
            "choices": [],
            "default": "0",
            "description": "set y expression (default "0")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "y",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "shadowx",
            ],
            "choices": [],
            "default": 0,
            "description": "set shadow x offset (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "shadowx",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "shadowy",
            ],
            "choices": [],
            "default": 0,
            "description": "set shadow y offset (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "shadowy",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "borderw",
            ],
            "choices": [],
            "default": 0,
            "description": "set border width (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "borderw",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "tabsize",
            ],
            "choices": [],
            "default": 4,
            "description": "set tab size (from 0 to INT_MAX) (default 4)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "tabsize",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "basetime",
            ],
            "choices": [],
            "default": "I64_MIN",
            "description": "set base time (from I64_MIN to I64_MAX) (default I64_MIN)",
            "flags": "..FV.......",
            "max": "I64_MAX",
            "min": "I64_MIN",
            "name": "basetime",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int64",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "font",
            ],
            "choices": [],
            "default": "Sans",
            "description": "Font name (default "Sans")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "font",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "expansion",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "set no expansion",
                "name": "none",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "set normal expansion",
                "name": "normal",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "set strftime expansion (deprecated)",
                "name": "strftime",
                "value": "2",
              },
            ],
            "default": "normal",
            "description": "set the expansion mode (from 0 to 2) (default normal)",
            "flags": "..FV.......",
            "max": "2",
            "min": "0",
            "name": "expansion",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "timecode",
            ],
            "choices": [],
            "default": null,
            "description": "set initial timecode",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "timecode",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "tc24hmax",
            ],
            "choices": [],
            "default": false,
            "description": "set 24 hours max (timecode only) (default false)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "tc24hmax",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "timecode_rate",
              "r",
              "rate",
            ],
            "choices": [],
            "default": "0/1",
            "description": "set rate (timecode only) (from 0 to INT_MAX) (default 0/1)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "timecode_rate",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "rational",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "reload",
            ],
            "choices": [],
            "default": 0,
            "description": "reload text file at specified frame interval (from 0 to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "reload",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "alpha",
            ],
            "choices": [],
            "default": "1",
            "description": "apply alpha while rendering (default "1")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "alpha",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fix_bounds",
            ],
            "choices": [],
            "default": false,
            "description": "check and fix text coords to avoid clipping (default false)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fix_bounds",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "start_number",
            ],
            "choices": [],
            "default": 0,
            "description": "start frame number for n/frame_num variable (from 0 to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "start_number",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "text_source",
            ],
            "choices": [],
            "default": null,
            "description": "the source of text",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "text_source",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "text_shaping",
            ],
            "choices": [],
            "default": true,
            "description": "attempt to shape text before drawing (default true)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "text_shaping",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "ft_load_flags",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "default",
                "value": "default",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_scale",
                "value": "no_scale",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_hinting",
                "value": "no_hinting",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "render",
                "value": "render",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_bitmap",
                "value": "no_bitmap",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "vertical_layout",
                "value": "vertical_layout",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "force_autohint",
                "value": "force_autohint",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "crop_bitmap",
                "value": "crop_bitmap",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "pedantic",
                "value": "pedantic",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "ignore_global_advance_width",
                "value": "ignore_global_advance_width",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_recurse",
                "value": "no_recurse",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "ignore_transform",
                "value": "ignore_transform",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "monochrome",
                "value": "monochrome",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "linear_design",
                "value": "linear_design",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_autohint",
                "value": "no_autohint",
              },
            ],
            "default": "0",
            "description": "set font loading flags for libfreetype (default 0)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "ft_load_flags",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "flags",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [],
            "choices": [],
            "default": null,
            "description": "timeline editing",
            "flags": null,
            "max": null,
            "min": null,
            "name": "enable",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#drawtext",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "drawtext",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "drawtext",
      "nodeType": "filter",
      "parameters": {
        "fontsize": 12,
        "text": "Hello World",
        "x": 10,
        "y": 10,
      },
    },
    "node-3" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Apply feedback video filter.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "feedback",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "x",
              "y",
            ],
            "choices": [],
            "default": 0,
            "description": "set top left crop position (from 0 to INT_MAX) (default 0)",
            "flags": "..FV.....T.",
            "max": "INT_MAX",
            "min": "0",
            "name": "x",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "w",
              "h",
            ],
            "choices": [],
            "default": 0,
            "description": "set crop size (from 0 to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "w",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#feedback",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
          {
            "__class__": "FFMpegIOType",
            "name": "feedin",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
          {
            "__class__": "FFMpegIOType",
            "name": "feedout",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "feedback",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
          {
            "id": "input-1",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
        ],
      },
      "label": "feedback",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-4" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-5" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "filename": "output2.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-7" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Draw text on top of video frames using libfreetype library.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": true,
        "name": "drawtext",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fontfile",
            ],
            "choices": [],
            "default": null,
            "description": "set font file",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fontfile",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "text",
            ],
            "choices": [],
            "default": null,
            "description": "set text",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "text",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "textfile",
            ],
            "choices": [],
            "default": null,
            "description": "set text file",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "textfile",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fontcolor",
            ],
            "choices": [],
            "default": "black",
            "description": "set foreground color (default "black")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fontcolor",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "color",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fontcolor_expr",
            ],
            "choices": [],
            "default": "",
            "description": "set foreground color expression (default "")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fontcolor_expr",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "boxcolor",
            ],
            "choices": [],
            "default": "white",
            "description": "set box color (default "white")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "boxcolor",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "color",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "bordercolor",
            ],
            "choices": [],
            "default": "black",
            "description": "set border color (default "black")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "bordercolor",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "color",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "shadowcolor",
            ],
            "choices": [],
            "default": "black",
            "description": "set shadow color (default "black")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "shadowcolor",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "color",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "box",
            ],
            "choices": [],
            "default": false,
            "description": "set box (default false)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "box",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "boxborderw",
            ],
            "choices": [],
            "default": 0,
            "description": "set box border width (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "boxborderw",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "line_spacing",
            ],
            "choices": [],
            "default": 0,
            "description": "set line spacing in pixels (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "line_spacing",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fontsize",
            ],
            "choices": [],
            "default": null,
            "description": "set font size",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fontsize",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "x",
            ],
            "choices": [],
            "default": "0",
            "description": "set x expression (default "0")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "x",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "y",
            ],
            "choices": [],
            "default": "0",
            "description": "set y expression (default "0")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "y",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "shadowx",
            ],
            "choices": [],
            "default": 0,
            "description": "set shadow x offset (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "shadowx",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "shadowy",
            ],
            "choices": [],
            "default": 0,
            "description": "set shadow y offset (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "shadowy",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "borderw",
            ],
            "choices": [],
            "default": 0,
            "description": "set border width (from INT_MIN to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "INT_MIN",
            "name": "borderw",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "tabsize",
            ],
            "choices": [],
            "default": 4,
            "description": "set tab size (from 0 to INT_MAX) (default 4)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "tabsize",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "basetime",
            ],
            "choices": [],
            "default": "I64_MIN",
            "description": "set base time (from I64_MIN to I64_MAX) (default I64_MIN)",
            "flags": "..FV.......",
            "max": "I64_MAX",
            "min": "I64_MIN",
            "name": "basetime",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int64",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "font",
            ],
            "choices": [],
            "default": "Sans",
            "description": "Font name (default "Sans")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "font",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "expansion",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "set no expansion",
                "name": "none",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "set normal expansion",
                "name": "normal",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "set strftime expansion (deprecated)",
                "name": "strftime",
                "value": "2",
              },
            ],
            "default": "normal",
            "description": "set the expansion mode (from 0 to 2) (default normal)",
            "flags": "..FV.......",
            "max": "2",
            "min": "0",
            "name": "expansion",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "timecode",
            ],
            "choices": [],
            "default": null,
            "description": "set initial timecode",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "timecode",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "tc24hmax",
            ],
            "choices": [],
            "default": false,
            "description": "set 24 hours max (timecode only) (default false)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "tc24hmax",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "timecode_rate",
              "r",
              "rate",
            ],
            "choices": [],
            "default": "0/1",
            "description": "set rate (timecode only) (from 0 to INT_MAX) (default 0/1)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "timecode_rate",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "rational",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "reload",
            ],
            "choices": [],
            "default": 0,
            "description": "reload text file at specified frame interval (from 0 to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "reload",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "alpha",
            ],
            "choices": [],
            "default": "1",
            "description": "apply alpha while rendering (default "1")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "alpha",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "fix_bounds",
            ],
            "choices": [],
            "default": false,
            "description": "check and fix text coords to avoid clipping (default false)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "fix_bounds",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "start_number",
            ],
            "choices": [],
            "default": 0,
            "description": "start frame number for n/frame_num variable (from 0 to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "start_number",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "text_source",
            ],
            "choices": [],
            "default": null,
            "description": "the source of text",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "text_source",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "text_shaping",
            ],
            "choices": [],
            "default": true,
            "description": "attempt to shape text before drawing (default true)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "text_shaping",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "ft_load_flags",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "default",
                "value": "default",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_scale",
                "value": "no_scale",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_hinting",
                "value": "no_hinting",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "render",
                "value": "render",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_bitmap",
                "value": "no_bitmap",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "vertical_layout",
                "value": "vertical_layout",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "force_autohint",
                "value": "force_autohint",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "crop_bitmap",
                "value": "crop_bitmap",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "pedantic",
                "value": "pedantic",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "ignore_global_advance_width",
                "value": "ignore_global_advance_width",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_recurse",
                "value": "no_recurse",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "ignore_transform",
                "value": "ignore_transform",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "monochrome",
                "value": "monochrome",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "linear_design",
                "value": "linear_design",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "no_autohint",
                "value": "no_autohint",
              },
            ],
            "default": "0",
            "description": "set font loading flags for libfreetype (default 0)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "ft_load_flags",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "flags",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [],
            "choices": [],
            "default": null,
            "description": "timeline editing",
            "flags": null,
            "max": null,
            "min": null,
            "name": "enable",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#drawtext",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "drawtext",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "drawtext",
      "nodeType": "filter",
      "parameters": {
        "fontsize": 12,
        "text": "Hello World",
        "x": 10,
        "y": 10,
      },
    },
    "node-8" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Apply feedback video filter.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "feedback",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "x",
              "y",
            ],
            "choices": [],
            "default": 0,
            "description": "set top left crop position (from 0 to INT_MAX) (default 0)",
            "flags": "..FV.....T.",
            "max": "INT_MAX",
            "min": "0",
            "name": "x",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "w",
              "h",
            ],
            "choices": [],
            "default": 0,
            "description": "set crop size (from 0 to INT_MAX) (default 0)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "w",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#feedback",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
          {
            "__class__": "FFMpegIOType",
            "name": "feedin",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
          {
            "__class__": "FFMpegIOType",
            "name": "feedout",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "feedback",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
          {
            "id": "input-1",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
        ],
      },
      "label": "feedback",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-9" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-10" => {
      "filename": "input2.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "output1.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
        {
          "__class__": "OutputStream",
          "index": 0,
          "node": {
            "__class__": "OutputNode",
            "filename": "output2.mp4",
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 1,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input2.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "feedback",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "fontsize": 12,
                    "text": "Hello World",
                    "x": 10,
                    "y": 10,
                  },
                  "name": "drawtext",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "output1.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "feedback",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "fontsize": 12,
              "text": "Hello World",
              "x": 10,
              "y": 10,
            },
            "name": "drawtext",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "feedback",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "fontsize": 12,
        "text": "Hello World",
        "x": 10,
        "y": 10,
      },
      "name": "drawtext",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "feedback",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-4" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "OutputNode",
      "filename": "output2.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input2.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "feedback",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "fontsize": 12,
              "text": "Hello World",
              "x": 10,
              "y": 10,
            },
            "name": "drawtext",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input2.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "feedback",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "fontsize": 12,
        "text": "Hello World",
        "x": 10,
        "y": 10,
      },
      "name": "drawtext",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-8" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input2.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "feedback",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-9" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-10" => {
      "__class__": "InputNode",
      "filename": "input2.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[multi-output-filter…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-4-0-node-3-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-5-0-node-3-1" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "feedback",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "feedback",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "fontsize": 12,
          "text": "Hello World",
          "x": 10,
          "y": 10,
        },
        "name": "drawtext",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-1-0-node-0-0" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output1.mp4",
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "feedback",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "fontsize": 12,
                "text": "Hello World",
                "x": 10,
                "y": 10,
              },
              "name": "drawtext",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {},
      },
    },
    "edge-node-9-0-node-8-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-10-0-node-8-1" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-8-1-node-7-0" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "feedback",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-7-0-node-6-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "feedback",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "fontsize": 12,
          "text": "Hello World",
          "x": 10,
          "y": 10,
        },
        "name": "drawtext",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-6-0-node-0-1" => {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output2.mp4",
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "feedback",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "fontsize": 12,
                "text": "Hello World",
                "x": 10,
                "y": 10,
              },
              "name": "drawtext",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "feedback",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "feedback",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "fontsize": 12,
          "text": "Hello World",
          "x": 10,
          "y": 10,
        },
        "name": "drawtext",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output1.mp4",
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "feedback",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "fontsize": 12,
                "text": "Hello World",
                "x": 10,
                "y": 10,
              },
              "name": "drawtext",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-0",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-8",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input2.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-8",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input2.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "feedback",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input2.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "feedback",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "fontsize": 12,
          "text": "Hello World",
          "x": 10,
          "y": 10,
        },
        "name": "drawtext",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "OutputStream",
      "index": 0,
      "node": {
        "__class__": "OutputNode",
        "filename": "output2.mp4",
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 1,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input2.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "feedback",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "fontsize": 12,
                "text": "Hello World",
                "x": 10,
                "y": 10,
              },
              "name": "drawtext",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-0",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[multi-output-filter…' case 3`] = `"{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{"fontsize":12,"text":"Hello World","x":10,"y":10},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"},{"node":{"kwargs":{},"inputs":[],"filename":"input2.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"name":"feedback","input_typings":[{"value":"video","__class__":"StreamType"},{"value":"video","__class__":"StreamType"}],"output_typings":[{"value":"video","__class__":"StreamType"},{"value":"video","__class__":"StreamType"}],"__class__":"FilterNode"},"index":0,"__class__":"VideoStream"}],"name":"drawtext","input_typings":[{"value":"video","__class__":"StreamType"}],"output_typings":[{"value":"video","__class__":"StreamType"}],"__class__":"FilterNode"},"index":0,"__class__":"VideoStream"}],"filename":"output1.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"},{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{"fontsize":12,"text":"Hello World","x":10,"y":10},"inputs":[{"node":{"kwargs":{},"inputs":[{"node":{"kwargs":{},"inputs":[],"filename":"input1.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"},{"node":{"kwargs":{},"inputs":[],"filename":"input2.mp4","__class__":"InputNode"},"index":null,"__class__":"AVStream"}],"name":"feedback","input_typings":[{"value":"video","__class__":"StreamType"},{"value":"video","__class__":"StreamType"}],"output_typings":[{"value":"video","__class__":"StreamType"},{"value":"video","__class__":"StreamType"}],"__class__":"FilterNode"},"index":1,"__class__":"VideoStream"}],"name":"drawtext","input_typings":[{"value":"video","__class__":"StreamType"}],"output_typings":[{"value":"video","__class__":"StreamType"}],"__class__":"FilterNode"},"index":0,"__class__":"VideoStream"}],"filename":"output2.mp4","__class__":"OutputNode"},"index":0,"__class__":"OutputStream"}],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[not-utilize-split][…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-3" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[not-utilize-split][…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-3-0-node-2-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[not-utilize-split][…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-dup…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Concatenate audio and video streams.",
        "formula_typings_input": "([StreamType.video]*int(v) + [StreamType.audio]*int(a))*int(n)",
        "formula_typings_output": "[StreamType.video]*int(v) + [StreamType.audio]*int(a)",
        "id": null,
        "is_dynamic_input": true,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "concat",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "n",
            ],
            "choices": [],
            "default": 2,
            "description": "specify the number of segments (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "n",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "v",
            ],
            "choices": [],
            "default": 1,
            "description": "specify the number of video streams (from 0 to INT_MAX) (default 1)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "v",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "a",
            ],
            "choices": [],
            "default": 0,
            "description": "specify the number of audio streams (from 0 to INT_MAX) (default 0)",
            "flags": "..F.A......",
            "max": "INT_MAX",
            "min": "0",
            "name": "a",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "unsafe",
            ],
            "choices": [],
            "default": false,
            "description": "enable unsafe mode (default false)",
            "flags": "..FVA......",
            "max": null,
            "min": null,
            "name": "unsafe",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
        ],
        "pre": {
          "n": "len(streams) // (int(v) + int(a))",
        },
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#concat",
        "stream_typings_input": [],
        "stream_typings_output": [],
      },
      "filterName": "concat",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
          {
            "id": "input-1",
            "type": "video",
          },
          {
            "id": "input-2",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
      "parameters": {
        "n": 3,
      },
    },
    "node-3" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
          {
            "id": "output-2",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 3,
      },
    },
    "node-4" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-5" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
          {
            "id": "output-2",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 3,
      },
    },
    "node-7" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-8" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-9" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
          {
            "id": "output-2",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 3,
      },
    },
    "node-10" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-11" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 3,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 3,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 2,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input1.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 3,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "n": 3,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 3,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 3,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 2,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input1.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 3,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "n": 3,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 3,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 3,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-8" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-9" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 3,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-10" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-11" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-dup…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-5-0-node-4-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-7-0-node-6-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-6-1-node-2-1" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-11-0-node-10-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-10-0-node-9-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-9-2-node-2-2" => {
      "__class__": "VideoStream",
      "index": 2,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 2,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-10",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-9",
    },
    {
      "__class__": "VideoStream",
      "index": 2,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input1.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 3,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 2,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 2,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input1.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 3,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "n": 3,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-dup…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-out…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-3" => {
      "filename": "input1.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input1.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input1.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "InputNode",
      "filename": "input1.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-out…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-3-0-node-2-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input1.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input1.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[redundant-split-out…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-input][compil…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Concatenate audio and video streams.",
        "formula_typings_input": "([StreamType.video]*int(v) + [StreamType.audio]*int(a))*int(n)",
        "formula_typings_output": "[StreamType.video]*int(v) + [StreamType.audio]*int(a)",
        "id": null,
        "is_dynamic_input": true,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "concat",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "n",
            ],
            "choices": [],
            "default": 2,
            "description": "specify the number of segments (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "n",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "v",
            ],
            "choices": [],
            "default": 1,
            "description": "specify the number of video streams (from 0 to INT_MAX) (default 1)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "v",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "a",
            ],
            "choices": [],
            "default": 0,
            "description": "specify the number of audio streams (from 0 to INT_MAX) (default 0)",
            "flags": "..F.A......",
            "max": "INT_MAX",
            "min": "0",
            "name": "a",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "unsafe",
            ],
            "choices": [],
            "default": false,
            "description": "enable unsafe mode (default false)",
            "flags": "..FVA......",
            "max": null,
            "min": null,
            "name": "unsafe",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
        ],
        "pre": {
          "n": "len(streams) // (int(v) + int(a))",
        },
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#concat",
        "stream_typings_input": [],
        "stream_typings_output": [],
      },
      "filterName": "concat",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
          {
            "id": "input-1",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
      "parameters": {
        "n": 2,
      },
    },
    "node-3" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-4" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-4" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-input][compil…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-3-0-node-2-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-2-1" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-input][compil…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-stream][compi…' case 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "tmp.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Concatenate audio and video streams.",
        "formula_typings_input": "([StreamType.video]*int(v) + [StreamType.audio]*int(a))*int(n)",
        "formula_typings_output": "[StreamType.video]*int(v) + [StreamType.audio]*int(a)",
        "id": null,
        "is_dynamic_input": true,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "concat",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "n",
            ],
            "choices": [],
            "default": 2,
            "description": "specify the number of segments (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "n",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "v",
            ],
            "choices": [],
            "default": 1,
            "description": "specify the number of video streams (from 0 to INT_MAX) (default 1)",
            "flags": "..FV.......",
            "max": "INT_MAX",
            "min": "0",
            "name": "v",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "a",
            ],
            "choices": [],
            "default": 0,
            "description": "specify the number of audio streams (from 0 to INT_MAX) (default 0)",
            "flags": "..F.A......",
            "max": "INT_MAX",
            "min": "0",
            "name": "a",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "unsafe",
            ],
            "choices": [],
            "default": false,
            "description": "enable unsafe mode (default false)",
            "flags": "..FVA......",
            "max": null,
            "min": null,
            "name": "unsafe",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
        ],
        "pre": {
          "n": "len(streams) // (int(v) + int(a))",
        },
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#concat",
        "stream_typings_input": [],
        "stream_typings_output": [],
      },
      "filterName": "concat",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
          {
            "id": "input-1",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "concat",
      "nodeType": "filter",
      "parameters": {
        "n": 2,
      },
    },
    "node-3" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-4" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-5" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-6" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Pass on the input to N video outputs.",
        "formula_typings_input": null,
        "formula_typings_output": "[StreamType.video] * int(outputs)",
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": true,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "split",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "outputs",
            ],
            "choices": [],
            "default": 2,
            "description": "set number of outputs (from 1 to INT_MAX) (default 2)",
            "flags": "..FVA......",
            "max": "INT_MAX",
            "min": "1",
            "name": "outputs",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#split_002c-asplit",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [],
      },
      "filterName": "split",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
          {
            "id": "output-1",
            "type": "video",
          },
        ],
      },
      "label": "split",
      "nodeType": "filter",
      "parameters": {
        "outputs": 2,
      },
    },
    "node-7" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Reverse a clip.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": false,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "reverse",
        "options": [],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#reverse",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "reverse",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "reverse",
      "nodeType": "filter",
      "parameters": {},
    },
    "node-8" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "OutputNode",
      "filename": "tmp.mp4",
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
              {
                "__class__": "VideoStream",
                "index": 1,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "VideoStream",
                      "index": 0,
                      "node": {
                        "__class__": "FilterNode",
                        "input_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                        "inputs": [
                          {
                            "__class__": "AVStream",
                            "index": null,
                            "node": {
                              "__class__": "InputNode",
                              "filename": "input.mp4",
                              "inputs": [],
                              "kwargs": {},
                            },
                          },
                        ],
                        "kwargs": {},
                        "name": "reverse",
                        "output_typings": [
                          {
                            "__class__": "StreamType",
                            "value": "video",
                          },
                        ],
                      },
                    },
                  ],
                  "kwargs": {
                    "outputs": 2,
                  },
                  "name": "split",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "n": 2,
            },
            "name": "concat",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
        {
          "__class__": "VideoStream",
          "index": 1,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "VideoStream",
                "index": 0,
                "node": {
                  "__class__": "FilterNode",
                  "input_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                  "inputs": [
                    {
                      "__class__": "AVStream",
                      "index": null,
                      "node": {
                        "__class__": "InputNode",
                        "filename": "input.mp4",
                        "inputs": [],
                        "kwargs": {},
                      },
                    },
                  ],
                  "kwargs": {},
                  "name": "reverse",
                  "output_typings": [
                    {
                      "__class__": "StreamType",
                      "value": "video",
                    },
                  ],
                },
              },
            ],
            "kwargs": {
              "outputs": 2,
            },
            "name": "split",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "n": 2,
      },
      "name": "concat",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-4" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-5" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-6" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "VideoStream",
          "index": 0,
          "node": {
            "__class__": "FilterNode",
            "input_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
            "inputs": [
              {
                "__class__": "AVStream",
                "index": null,
                "node": {
                  "__class__": "InputNode",
                  "filename": "input.mp4",
                  "inputs": [],
                  "kwargs": {},
                },
              },
            ],
            "kwargs": {},
            "name": "reverse",
            "output_typings": [
              {
                "__class__": "StreamType",
                "value": "video",
              },
            ],
          },
        },
      ],
      "kwargs": {
        "outputs": 2,
      },
      "name": "split",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-7" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
      "name": "reverse",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-8" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-stream][compi…' case 2`] = `
{
  "edgeMap": Map {
    "edge-node-5-0-node-4-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-4-0-node-3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-3-0-node-2-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-8-0-node-7-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-7-0-node-6-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-6-1-node-2-1" => {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-2-0-node-1-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-4",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-7",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {},
        "name": "reverse",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-6",
    },
    {
      "__class__": "VideoStream",
      "index": 1,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "AVStream",
                  "index": null,
                  "node": {
                    "__class__": "InputNode",
                    "filename": "input.mp4",
                    "inputs": [],
                    "kwargs": {},
                  },
                },
              ],
              "kwargs": {},
              "name": "reverse",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "outputs": 2,
        },
        "name": "split",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 1,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "VideoStream",
            "index": 0,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
          {
            "__class__": "VideoStream",
            "index": 1,
            "node": {
              "__class__": "FilterNode",
              "input_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
              "inputs": [
                {
                  "__class__": "VideoStream",
                  "index": 0,
                  "node": {
                    "__class__": "FilterNode",
                    "input_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                    "inputs": [
                      {
                        "__class__": "AVStream",
                        "index": null,
                        "node": {
                          "__class__": "InputNode",
                          "filename": "input.mp4",
                          "inputs": [],
                          "kwargs": {},
                        },
                      },
                    ],
                    "kwargs": {},
                    "name": "reverse",
                    "output_typings": [
                      {
                        "__class__": "StreamType",
                        "value": "video",
                      },
                    ],
                  },
                },
              ],
              "kwargs": {
                "outputs": 2,
              },
              "name": "split",
              "output_typings": [
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
                {
                  "__class__": "StreamType",
                  "value": "video",
                },
              ],
            },
          },
        ],
        "kwargs": {
          "n": 2,
        },
        "name": "concat",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-1",
    },
  },
}
`;

exports[`Node Mapping > should handle 'test_compile_json[reuse-stream][compi…' case 3`] = `"{"kwargs":{},"inputs":[],"__class__":"GlobalNode"}"`;

exports[`Node Mapping > should import from JSON string 1`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": [],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should import from JSON string 2`] = `
{
  "nodeData": Map {
    "node-0" => {
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "global",
      "nodeType": "global",
    },
    "node-1" => {
      "filename": "input.mp4",
      "handles": {
        "inputs": [],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "input",
      "nodeType": "input",
    },
    "node-2" => {
      "filter": {
        "__class__": "FFMpegFilter",
        "description": "Scale the input video size and/or convert the image format.",
        "formula_typings_input": null,
        "formula_typings_output": null,
        "id": null,
        "is_dynamic_input": false,
        "is_dynamic_output": false,
        "is_filter_sink": false,
        "is_filter_source": false,
        "is_support_command": true,
        "is_support_framesync": false,
        "is_support_slice_threading": false,
        "is_support_timeline": false,
        "name": "scale",
        "options": [
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "w",
              "width",
            ],
            "choices": [],
            "default": null,
            "description": "Output video width",
            "flags": "..FV.....T.",
            "max": null,
            "min": null,
            "name": "w",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "h",
              "height",
            ],
            "choices": [],
            "default": null,
            "description": "Output video height",
            "flags": "..FV.....T.",
            "max": null,
            "min": null,
            "name": "h",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "flags",
            ],
            "choices": [],
            "default": "",
            "description": "Flags to pass to libswscale (default "")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "flags",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "interl",
            ],
            "choices": [],
            "default": false,
            "description": "set interlacing (default false)",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "interl",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "boolean",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "in_color_matrix",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "auto",
                "value": "auto",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "bt601",
                "value": "bt601",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "bt470",
                "value": "bt470",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "smpte170m",
                "value": "smpte170m",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "bt709",
                "value": "bt709",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "fcc",
                "value": "fcc",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "smpte240m",
                "value": "smpte240m",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "bt2020",
                "value": "bt2020",
              },
            ],
            "default": "auto",
            "description": "set input YCbCr type (default "auto")",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "in_color_matrix",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "out_color_matrix",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "auto",
                "value": "auto",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "bt601",
                "value": "bt601",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "bt470",
                "value": "bt470",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "smpte170m",
                "value": "smpte170m",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "bt709",
                "value": "bt709",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "fcc",
                "value": "fcc",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "smpte240m",
                "value": "smpte240m",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "bt2020",
                "value": "bt2020",
              },
            ],
            "default": null,
            "description": "set output YCbCr type",
            "flags": "..FV.......",
            "max": null,
            "min": null,
            "name": "out_color_matrix",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "string",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "in_range",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "auto",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "unknown",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "full",
                "value": "2",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "limited",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "jpeg",
                "value": "2",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "mpeg",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "tv",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "pc",
                "value": "2",
              },
            ],
            "default": "auto",
            "description": "set input color range (from 0 to 2) (default auto)",
            "flags": "..FV.......",
            "max": "2",
            "min": "0",
            "name": "in_range",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "out_range",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "auto",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "unknown",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "full",
                "value": "2",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "limited",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "jpeg",
                "value": "2",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "mpeg",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "tv",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "pc",
                "value": "2",
              },
            ],
            "default": "auto",
            "description": "set output color range (from 0 to 2) (default auto)",
            "flags": "..FV.......",
            "max": "2",
            "min": "0",
            "name": "out_range",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "in_v_chr_pos",
            ],
            "choices": [],
            "default": -513,
            "description": "input vertical chroma position in luma grid/256 (from -513 to 512) (default -513)",
            "flags": "..FV.......",
            "max": "512",
            "min": "-513",
            "name": "in_v_chr_pos",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "in_h_chr_pos",
            ],
            "choices": [],
            "default": -513,
            "description": "input horizontal chroma position in luma grid/256 (from -513 to 512) (default -513)",
            "flags": "..FV.......",
            "max": "512",
            "min": "-513",
            "name": "in_h_chr_pos",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "out_v_chr_pos",
            ],
            "choices": [],
            "default": -513,
            "description": "output vertical chroma position in luma grid/256 (from -513 to 512) (default -513)",
            "flags": "..FV.......",
            "max": "512",
            "min": "-513",
            "name": "out_v_chr_pos",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "out_h_chr_pos",
            ],
            "choices": [],
            "default": -513,
            "description": "output horizontal chroma position in luma grid/256 (from -513 to 512) (default -513)",
            "flags": "..FV.......",
            "max": "512",
            "min": "-513",
            "name": "out_h_chr_pos",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "force_original_aspect_ratio",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "disable",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "decrease",
                "value": "1",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "",
                "name": "increase",
                "value": "2",
              },
            ],
            "default": "disable",
            "description": "decrease or increase w/h if necessary to keep the original AR (from 0 to 2) (default disable)",
            "flags": "..FV.......",
            "max": "2",
            "min": "0",
            "name": "force_original_aspect_ratio",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "force_divisible_by",
            ],
            "choices": [],
            "default": 1,
            "description": "enforce that the output resolution is divisible by a defined integer when force_original_aspect_ratio is used (from 1 to 256) (default 1)",
            "flags": "..FV.......",
            "max": "256",
            "min": "1",
            "name": "force_divisible_by",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "param0",
            ],
            "choices": [],
            "default": "DBL_MAX",
            "description": "Scaler param 0 (from -DBL_MAX to DBL_MAX) (default DBL_MAX)",
            "flags": "..FV.......",
            "max": "DBL_MAX",
            "min": "-DBL_MAX",
            "name": "param0",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "double",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "param1",
            ],
            "choices": [],
            "default": "DBL_MAX",
            "description": "Scaler param 1 (from -DBL_MAX to DBL_MAX) (default DBL_MAX)",
            "flags": "..FV.......",
            "max": "DBL_MAX",
            "min": "-DBL_MAX",
            "name": "param1",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "double",
            },
          },
          {
            "__class__": "FFMpegFilterOption",
            "alias": [
              "eval",
            ],
            "choices": [
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "eval expressions once during initialization",
                "name": "init",
                "value": "0",
              },
              {
                "__class__": "FFMpegFilterOptionChoice",
                "flags": "..FV.......",
                "help": "eval expressions during initialization and per-frame",
                "name": "frame",
                "value": "1",
              },
            ],
            "default": "init",
            "description": "specify when to evaluate expressions (from 0 to 1) (default init)",
            "flags": "..FV.......",
            "max": "1",
            "min": "0",
            "name": "eval",
            "required": false,
            "type": {
              "__class__": "FFMpegFilterOptionType",
              "value": "int",
            },
          },
        ],
        "pre": [],
        "ref": "https://ffmpeg.org/ffmpeg-filters.html#scale",
        "stream_typings_input": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
        "stream_typings_output": [
          {
            "__class__": "FFMpegIOType",
            "name": "default",
            "type": {
              "__class__": "StreamType",
              "value": "video",
            },
          },
        ],
      },
      "filterName": "scale",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "video",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "video",
          },
        ],
      },
      "label": "scale",
      "nodeType": "filter",
      "parameters": {
        "height": 480,
        "width": 640,
      },
    },
    "node-3" => {
      "filename": "output.mp4",
      "handles": {
        "inputs": [
          {
            "id": "input-0",
            "type": "av",
          },
        ],
        "outputs": [
          {
            "id": "output-0",
            "type": "av",
          },
        ],
      },
      "label": "output",
      "nodeType": "output",
    },
  },
  "nodeMap": Map {
    "node-0" => {
      "__class__": "GlobalNode",
      "inputs": undefined,
      "kwargs": {},
    },
    "node-1" => {
      "__class__": "InputNode",
      "filename": "input.mp4",
      "inputs": [],
      "kwargs": {},
    },
    "node-2" => {
      "__class__": "FilterNode",
      "input_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
      "inputs": [
        {
          "__class__": "AVStream",
          "index": null,
          "node": {
            "__class__": "InputNode",
            "filename": "input.mp4",
            "inputs": [],
            "kwargs": {},
          },
        },
      ],
      "kwargs": {
        "height": 480,
        "width": 640,
      },
      "name": "scale",
      "output_typings": [
        {
          "__class__": "StreamType",
          "value": "video",
        },
      ],
    },
    "node-3" => {
      "__class__": "OutputNode",
      "filename": "output.mp4",
      "inputs": [
        {
          "__class__": "GlobalStream",
          "index": null,
          "node": {
            "__class__": "GlobalNode",
            "inputs": undefined,
            "kwargs": {},
          },
        },
      ],
      "kwargs": {},
    },
  },
}
`;

exports[`Node Mapping > should import from JSON string 3`] = `
{
  "edgeMap": Map {},
  "targetMap": Map {},
}
`;

exports[`Node Mapping > should import from JSON string 4`] = `
{
  "edgeMap": Map {
    "edge-node-1-0-node-2-0" => {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    },
    "edge-node-2-0-node-3-0" => {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {
          "height": 480,
          "width": 640,
        },
        "name": "scale",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    },
    "edge-node-0-0-node-3-0" => {
      "__class__": "GlobalStream",
      "index": null,
      "node": {
        "__class__": "GlobalNode",
        "inputs": undefined,
        "kwargs": {},
      },
    },
  },
  "targetMap": Map {
    {
      "__class__": "AVStream",
      "index": null,
      "node": {
        "__class__": "InputNode",
        "filename": "input.mp4",
        "inputs": [],
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-2",
    },
    {
      "__class__": "VideoStream",
      "index": 0,
      "node": {
        "__class__": "FilterNode",
        "input_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
        "inputs": [
          {
            "__class__": "AVStream",
            "index": null,
            "node": {
              "__class__": "InputNode",
              "filename": "input.mp4",
              "inputs": [],
              "kwargs": {},
            },
          },
        ],
        "kwargs": {
          "height": 480,
          "width": 640,
        },
        "name": "scale",
        "output_typings": [
          {
            "__class__": "StreamType",
            "value": "video",
          },
        ],
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
    {
      "__class__": "GlobalStream",
      "index": null,
      "node": {
        "__class__": "GlobalNode",
        "inputs": undefined,
        "kwargs": {},
      },
    } => {
      "index": 0,
      "nodeId": "node-3",
    },
  },
}
`;
