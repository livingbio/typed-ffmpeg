# serializer version: 1
# name: test_rebuild_graph[amix-stream-2][all_nodes]
  list([
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'),
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
    FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
    FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)),
    OutputNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), filename='tmp.mp4'),
  ])
# ---
# name: test_rebuild_graph[amix-stream-2][all_streams]
  list([
    AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
  ])
# ---
# name: test_rebuild_graph[amix-stream-2][node_labels]
  dict({
    FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)): 's2',
    FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): 's1',
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): 's0',
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): '0',
    OutputNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), filename='tmp.mp4'): 'out',
  })
# ---
# name: test_rebuild_graph[amix-stream-2][outgoing_nodes]
  defaultdict({
    AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0): list([
      tuple(
        OutputNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), filename='tmp.mp4'),
        0,
      ),
    ]),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)),
        1,
      ),
    ]),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)),
        0,
      ),
      tuple(
        FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
        0,
      ),
    ]),
    AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
        0,
      ),
    ]),
  })
# ---
# name: test_rebuild_graph[amix-stream-2][outgoing_streams]
  defaultdict({
    FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)): list([
      AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): list([
      AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): list([
      AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): list([
      AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    ]),
  })
# ---
# name: test_rebuild_graph[amix-stream][all_nodes]
  list([
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'),
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
    FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
    FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)),
    OutputNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), filename='tmp.mp4'),
  ])
# ---
# name: test_rebuild_graph[amix-stream][all_streams]
  list([
    AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
  ])
# ---
# name: test_rebuild_graph[amix-stream][node_labels]
  dict({
    FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)): 's2',
    FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): 's1',
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): 's0',
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): '0',
    OutputNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), filename='tmp.mp4'): 'out',
  })
# ---
# name: test_rebuild_graph[amix-stream][outgoing_nodes]
  defaultdict({
    AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0): list([
      tuple(
        OutputNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), filename='tmp.mp4'),
        0,
      ),
    ]),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)),
        0,
      ),
    ]),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)),
        1,
      ),
      tuple(
        FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
        0,
      ),
    ]),
    AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
        0,
      ),
    ]),
  })
# ---
# name: test_rebuild_graph[amix-stream][outgoing_streams]
  defaultdict({
    FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)): list([
      AudioStream(node=FilterNode(kwargs=(('inputs', 2), ('duration', 'first')), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='amix', input_typings=(<StreamType.audio: 'audio'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): list([
      AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): list([
      AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): list([
      AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    ]),
  })
# ---
# name: test_rebuild_graph[complex-stream][all_nodes]
  list([
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'),
    InputNode(kwargs=(), inputs=(), filename='input2.mp4'),
    FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
    FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)),
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=0), AudioStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=1)), filename='tmp.mp4'),
  ])
# ---
# name: test_rebuild_graph[complex-stream][all_streams]
  list([
    VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),
    VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    VideoStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=0),
    AudioStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=1),
  ])
# ---
# name: test_rebuild_graph[complex-stream][node_labels]
  dict({
    FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)): 's2',
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): 's1',
    FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): 's0',
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): '0',
    InputNode(kwargs=(), inputs=(), filename='input2.mp4'): '1',
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=0), AudioStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=1)), filename='tmp.mp4'): 'out',
  })
# ---
# name: test_rebuild_graph[complex-stream][outgoing_nodes]
  defaultdict({
    AudioStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=1): list([
      tuple(
        OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=0), AudioStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=1)), filename='tmp.mp4'),
        1,
      ),
    ]),
    AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)),
        1,
      ),
      tuple(
        FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)),
        3,
      ),
    ]),
    AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=0): list([
      tuple(
        OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=0), AudioStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=1)), filename='tmp.mp4'),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)),
        0,
      ),
      tuple(
        FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)),
        2,
      ),
    ]),
    VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
    ]),
  })
# ---
# name: test_rebuild_graph[complex-stream][outgoing_streams]
  defaultdict({
    FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)): list([
      VideoStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=0),
      AudioStream(node=FilterNode(kwargs=(('n', 2), ('v', 1), ('a', 1)), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>, <StreamType.video: 'video'>, <StreamType.audio: 'audio'>), output_typings=(<StreamType.video: 'video'>, <StreamType.audio: 'audio'>)), index=1),
    ]),
    FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)): list([
      AudioStream(node=FilterNode(kwargs=(), inputs=(AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),), name='areverse', input_typings=(<StreamType.audio: 'audio'>,), output_typings=(<StreamType.audio: 'audio'>,)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): list([
      VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input2.mp4'): list([
      AudioStream(node=InputNode(kwargs=(), inputs=(), filename='input2.mp4'), index=None),
    ]),
  })
# ---
# name: test_rebuild_graph[not-utilize-split][all_nodes]
  list([
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'),
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)),
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), filename='tmp.mp4'),
  ])
# ---
# name: test_rebuild_graph[not-utilize-split][all_streams]
  list([
    AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),
  ])
# ---
# name: test_rebuild_graph[not-utilize-split][node_labels]
  dict({
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)): 's1',
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): 's0',
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): '0',
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), filename='tmp.mp4'): 'out',
  })
# ---
# name: test_rebuild_graph[not-utilize-split][outgoing_nodes]
  defaultdict({
    AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0): list([
      tuple(
        OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), filename='tmp.mp4'),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)),
        0,
      ),
    ]),
  })
# ---
# name: test_rebuild_graph[not-utilize-split][outgoing_streams]
  defaultdict({
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)): list([
      VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): list([
      AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    ]),
  })
# ---
# name: test_rebuild_graph[reduntant-split-duplicate][all_nodes]
  list([
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'),
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)),
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)),
    FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'),
  ])
# ---
# name: test_rebuild_graph[reduntant-split-duplicate][all_streams]
  list([
    AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1),
    VideoStream(node=FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),
  ])
# ---
# name: test_rebuild_graph[reduntant-split-duplicate][node_labels]
  dict({
    FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)): 's3',
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)): 's2',
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)): 's1',
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): 's0',
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): '0',
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'): 'out',
  })
# ---
# name: test_rebuild_graph[reduntant-split-duplicate][outgoing_nodes]
  defaultdict({
    AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0): list([
      tuple(
        FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1): list([
      tuple(
        FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
        1,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0): list([
      tuple(
        FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1): list([
      tuple(
        FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
        2,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)),
        0,
      ),
    ]),
  })
# ---
# name: test_rebuild_graph[reduntant-split-duplicate][outgoing_streams]
  defaultdict({
    FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(('n', 3),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1), VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)): list([
      VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),
      VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1),
    ]),
    FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)): list([
      VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=1),
      VideoStream(node=FilterNode(kwargs=(('outputs', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): list([
      AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    ]),
  })
# ---
# name: test_rebuild_graph[reduntant-split-outputs-1][all_nodes]
  list([
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'),
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
    FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'),
  ])
# ---
# name: test_rebuild_graph[reduntant-split-outputs-1][all_streams]
  list([
    AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    VideoStream(node=FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
  ])
# ---
# name: test_rebuild_graph[reduntant-split-outputs-1][node_labels]
  dict({
    FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): 's1',
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): 's0',
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): '0',
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'): 'out',
  })
# ---
# name: test_rebuild_graph[reduntant-split-outputs-1][outgoing_nodes]
  defaultdict({
    AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
    ]),
  })
# ---
# name: test_rebuild_graph[reduntant-split-outputs-1][outgoing_streams]
  defaultdict({
    FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(('outputs', 1),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),), name='split', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input1.mp4'): list([
      AVStream(node=InputNode(kwargs=(), inputs=(), filename='input1.mp4'), index=None),
    ]),
  })
# ---
# name: test_rebuild_graph[reuse-input][all_nodes]
  list([
    InputNode(kwargs=(), inputs=(), filename='input.mp4'),
    FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'),
  ])
# ---
# name: test_rebuild_graph[reuse-input][all_streams]
  list([
    VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),
    VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),
  ])
# ---
# name: test_rebuild_graph[reuse-input][node_labels]
  dict({
    FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)): 's0',
    InputNode(kwargs=(), inputs=(), filename='input.mp4'): '0',
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'): 'out',
  })
# ---
# name: test_rebuild_graph[reuse-input][outgoing_nodes]
  defaultdict({
    VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'),
        0,
      ),
    ]),
    VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
      tuple(
        FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
        1,
      ),
    ]),
  })
# ---
# name: test_rebuild_graph[reuse-input][outgoing_streams]
  defaultdict({
    FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None), VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input.mp4'): list([
      VideoStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),
    ]),
  })
# ---
# name: test_rebuild_graph[reuse-stream][all_nodes]
  list([
    InputNode(kwargs=(), inputs=(), filename='input.mp4'),
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
    FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'),
  ])
# ---
# name: test_rebuild_graph[reuse-stream][all_streams]
  list([
    AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),
    VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),
  ])
# ---
# name: test_rebuild_graph[reuse-stream][node_labels]
  dict({
    FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)): 's1',
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): 's0',
    InputNode(kwargs=(), inputs=(), filename='input.mp4'): '0',
    OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'): 'out',
  })
# ---
# name: test_rebuild_graph[reuse-stream][outgoing_nodes]
  defaultdict({
    AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None): list([
      tuple(
        FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        OutputNode(kwargs=(), inputs=(VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),), filename='tmp.mp4'),
        0,
      ),
    ]),
    VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0): list([
      tuple(
        FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
        0,
      ),
      tuple(
        FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)),
        1,
      ),
    ]),
  })
# ---
# name: test_rebuild_graph[reuse-stream][outgoing_streams]
  defaultdict({
    FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(('n', 2),), inputs=(VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0), VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0)), name='concat', input_typings=(<StreamType.video: 'video'>, <StreamType.video: 'video'>), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)): list([
      VideoStream(node=FilterNode(kwargs=(), inputs=(AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),), name='reverse', input_typings=(<StreamType.video: 'video'>,), output_typings=(<StreamType.video: 'video'>,)), index=0),
    ]),
    InputNode(kwargs=(), inputs=(), filename='input.mp4'): list([
      AVStream(node=InputNode(kwargs=(), inputs=(), filename='input.mp4'), index=None),
    ]),
  })
# ---
