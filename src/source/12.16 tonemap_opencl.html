<h3 class="section"><a href="#toc-tonemap_005fopencl">12.16 tonemap_opencl</a></h3>

<p>Perform HDR(PQ/HLG) to SDR conversion with tone-mapping.
</p>
<p>It accepts the following parameters:
</p>
<dl compact="compact">
<dt><samp>tonemap</samp></dt>
<dd><p>Specify the tone-mapping operator to be used. Same as tonemap option in <a href="#tonemap">tonemap</a>.
</p>
</dd>
<dt><samp>param</samp></dt>
<dd><p>Tune the tone mapping algorithm. same as param option in <a href="#tonemap">tonemap</a>.
</p>
</dd>
<dt><samp>desat</samp></dt>
<dd><p>Apply desaturation for highlights that exceed this level of brightness. The
higher the parameter, the more color information will be preserved. This
setting helps prevent unnaturally blown-out colors for super-highlights, by
(smoothly) turning into white instead. This makes images feel more natural,
at the cost of reducing information about out-of-range colors.
</p>
<p>The default value is 0.5, and the algorithm here is a little different from
the cpu version tonemap currently. A setting of 0.0 disables this option.
</p>
</dd>
<dt><samp>threshold</samp></dt>
<dd><p>The tonemapping algorithm parameters is fine-tuned per each scene. And a threshold
is used to detect whether the scene has changed or not. If the distance between
the current frame average brightness and the current running average exceeds
a threshold value, we would re-calculate scene average and peak brightness.
The default value is 0.2.
</p>
</dd>
<dt><samp>format</samp></dt>
<dd><p>Specify the output pixel format.
</p>
<p>Currently supported formats are:
</p><dl compact="compact">
<dt><var>p010</var></dt>
<dt><var>nv12</var></dt>
</dl>

</dd>
<dt><samp>range, r</samp></dt>
<dd><p>Set the output color range.
</p>
<p>Possible values are:
</p><dl compact="compact">
<dt><var>tv/mpeg</var></dt>
<dt><var>pc/jpeg</var></dt>
</dl>

<p>Default is same as input.
</p>
</dd>
<dt><samp>primaries, p</samp></dt>
<dd><p>Set the output color primaries.
</p>
<p>Possible values are:
</p><dl compact="compact">
<dt><var>bt709</var></dt>
<dt><var>bt2020</var></dt>
</dl>

<p>Default is same as input.
</p>
</dd>
<dt><samp>transfer, t</samp></dt>
<dd><p>Set the output transfer characteristics.
</p>
<p>Possible values are:
</p><dl compact="compact">
<dt><var>bt709</var></dt>
<dt><var>bt2020</var></dt>
</dl>

<p>Default is bt709.
</p>
</dd>
<dt><samp>matrix, m</samp></dt>
<dd><p>Set the output colorspace matrix.
</p>
<p>Possible value are:
</p><dl compact="compact">
<dt><var>bt709</var></dt>
<dt><var>bt2020</var></dt>
</dl>

<p>Default is same as input.
</p>
</dd>
</dl>
