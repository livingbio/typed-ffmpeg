<h3 class="section"><a href="#toc-normalize">11.178 normalize</a></h3>

<p>Normalize RGB video (aka histogram stretching, contrast stretching).
See: https://en.wikipedia.org/wiki/Normalization_(image_processing)
</p>
<p>For each channel of each frame, the filter computes the input range and maps
it linearly to the user-specified output range. The output range defaults
to the full dynamic range from pure black to pure white.
</p>
<p>Temporal smoothing can be used on the input range to reduce flickering (rapid
changes in brightness) caused when small dark or bright objects enter or leave
the scene. This is similar to the auto-exposure (automatic gain control) on a
video camera, and, like a video camera, it may cause a period of over- or
under-exposure of the video.
</p>
<p>The R,G,B channels can be normalized independently, which may cause some
color shifting, or linked together as a single channel, which prevents
color shifting. Linked normalization preserves hue. Independent normalization
does not, so it can be used to remove some color casts. Independent and linked
normalization can be combined in any ratio.
</p>
<p>The normalize filter accepts the following options:
</p>
<dl compact="compact">
<dt><samp>blackpt</samp></dt>
<dt><samp>whitept</samp></dt>
<dd><p>Colors which define the output range. The minimum input value is mapped to
the <var>blackpt</var>. The maximum input value is mapped to the <var>whitept</var>.
The defaults are black and white respectively. Specifying white for
<var>blackpt</var> and black for <var>whitept</var> will give color-inverted,
normalized video. Shades of grey can be used to reduce the dynamic range
(contrast). Specifying saturated colors here can create some interesting
effects.
</p>
</dd>
<dt><samp>smoothing</samp></dt>
<dd><p>The number of previous frames to use for temporal smoothing. The input range
of each channel is smoothed using a rolling average over the current frame
and the <var>smoothing</var> previous frames. The default is 0 (no temporal
smoothing).
</p>
</dd>
<dt><samp>independence</samp></dt>
<dd><p>Controls the ratio of independent (color shifting) channel normalization to
linked (color preserving) normalization. 0.0 is fully linked, 1.0 is fully
independent. Defaults to 1.0 (fully independent).
</p>
</dd>
<dt><samp>strength</samp></dt>
<dd><p>Overall strength of the filter. 1.0 is full strength. 0.0 is a rather
expensive no-op. Defaults to 1.0 (full strength).
</p>
</dd>
</dl>
