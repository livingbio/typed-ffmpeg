{
  "description": "### 8.85 dynaudnorm\n\nDynamic Audio Normalizer.\n\nThis filter applies a certain amount of gain to the input audio in order to\nbring its peak magnitude to a target level (e.g. 0 dBFS). However, in contrast\nto more \"simple\" normalization algorithms, the Dynamic Audio Normalizer\n*dynamically* re-adjusts the gain factor to the input audio. This allows for\napplying extra gain to the \"quiet\" sections of the audio while avoiding\ndistortions or clipping the \"loud\" sections. In other words: The Dynamic Audio\nNormalizer will \"even out\" the volume of quiet and loud sections, in the sense\nthat the volume of each section is brought to the same target level. Note,\nhowever, that the Dynamic Audio Normalizer achieves this goal *without*\napplying \"dynamic range compressing\". It will retain 100% of the dynamic range\n*within* each section of the audio file.\n\n**framelen, f**\n\n    Set the frame length in milliseconds. In range from 10 to 8000 milliseconds. Default is 500 milliseconds. The Dynamic Audio Normalizer processes the input audio in small chunks, referred to as frames. This is required, because a peak magnitude has no meaning for just a single sample value. Instead, we need to determine the peak magnitude for a contiguous sequence of sample values. While a \"standard\" normalizer would simply use the peak magnitude of the complete file, the Dynamic Audio Normalizer determines the peak magnitude individually for each frame. The length of a frame is specified in milliseconds. By default, the Dynamic Audio Normalizer uses a frame length of 500 milliseconds, which has been found to give good results with most files. Note that the exact frame length, in number of samples, will be determined automatically, based on the sampling rate of the individual input audio file. \n\n**gausssize, g**\n\n    Set the Gaussian filter window size. In range from 3 to 301, must be odd number. Default is 31. Probably the most important parameter of the Dynamic Audio Normalizer is the window size of the Gaussian smoothing filter. The filter\u2019s window size is specified in frames, centered around the current frame. For the sake of simplicity, this must be an odd number. Consequently, the default value of 31 takes into account the current frame, as well as the 15 preceding frames and the 15 subsequent frames. Using a larger window results in a stronger smoothing effect and thus in less gain variation, i.e. slower gain adaptation. Conversely, using a smaller window results in a weaker smoothing effect and thus in more gain variation, i.e. faster gain adaptation. In other words, the more you increase this value, the more the Dynamic Audio Normalizer will behave like a \"traditional\" normalization filter. On the contrary, the more you decrease this value, the more the Dynamic Audio Normalizer will behave like a dynamic range compressor. \n\n**peak, p**\n\n    Set the target peak value. This specifies the highest permissible magnitude level for the normalized audio input. This filter will try to approach the target peak magnitude as closely as possible, but at the same time it also makes sure that the normalized signal will never exceed the peak magnitude. A frame\u2019s maximum local gain factor is imposed directly by the target peak magnitude. The default value is 0.95 and thus leaves a headroom of 5%*. It is not recommended to go above this value. \n\n**maxgain, m**\n\n    Set the maximum gain factor. In range from 1.0 to 100.0. Default is 10.0. The Dynamic Audio Normalizer determines the maximum possible (local) gain factor for each input frame, i.e. the maximum gain factor that does not result in clipping or distortion. The maximum gain factor is determined by the frame\u2019s highest magnitude sample. However, the Dynamic Audio Normalizer additionally bounds the frame\u2019s maximum gain factor by a predetermined (global) maximum gain factor. This is done in order to avoid excessive gain factors in \"silent\" or almost silent frames. By default, the maximum gain factor is 10.0, For most inputs the default value should be sufficient and it usually is not recommended to increase this value. Though, for input with an extremely low overall volume level, it may be necessary to allow even higher gain factors. Note, however, that the Dynamic Audio Normalizer does not simply apply a \"hard\" threshold (i.e. cut off values above the threshold). Instead, a \"sigmoid\" threshold function will be applied. This way, the gain factors will smoothly approach the threshold value, but never exceed that value. \n\n**targetrms, r**\n\n    Set the target RMS. In range from 0.0 to 1.0. Default is 0.0 - disabled. By default, the Dynamic Audio Normalizer performs \"peak\" normalization. This means that the maximum local gain factor for each frame is defined (only) by the frame\u2019s highest magnitude sample. This way, the samples can be amplified as much as possible without exceeding the maximum signal level, i.e. without clipping. Optionally, however, the Dynamic Audio Normalizer can also take into account the frame\u2019s root mean square, abbreviated RMS. In electrical engineering, the RMS is commonly used to determine the power of a time-varying signal. It is therefore considered that the RMS is a better approximation of the \"perceived loudness\" than just looking at the signal\u2019s peak magnitude. Consequently, by adjusting all frames to a constant RMS value, a uniform \"perceived loudness\" can be established. If a target RMS value has been specified, a frame\u2019s local gain factor is defined as the factor that would result in exactly that RMS value. Note, however, that the maximum local gain factor is still restricted by the frame\u2019s highest magnitude sample, in order to prevent clipping. \n\n**coupling, n**\n\n    Enable channels coupling. By default is enabled. By default, the Dynamic Audio Normalizer will amplify all channels by the same amount. This means the same gain factor will be applied to all channels, i.e. the maximum possible gain factor is determined by the \"loudest\" channel. However, in some recordings, it may happen that the volume of the different channels is uneven, e.g. one channel may be \"quieter\" than the other one(s). In this case, this option can be used to disable the channel coupling. This way, the gain factor will be determined independently for each channel, depending only on the individual channel\u2019s highest magnitude sample. This allows for harmonizing the volume of the different channels. \n\n**correctdc, c**\n\n    Enable DC bias correction. By default is disabled. An audio signal (in the time domain) is a sequence of sample values. In the Dynamic Audio Normalizer these sample values are represented in the -1.0 to 1.0 range, regardless of the original input format. Normally, the audio signal, or \"waveform\", should be centered around the zero point. That means if we calculate the mean value of all samples in a file, or in a single frame, then the result should be 0.0 or at least very close to that value. If, however, there is a significant deviation of the mean value from 0.0, in either positive or negative direction, this is referred to as a DC bias or DC offset. Since a DC bias is clearly undesirable, the Dynamic Audio Normalizer provides optional DC bias correction. With DC bias correction enabled, the Dynamic Audio Normalizer will determine the mean value, or \"DC correction\" offset, of each input frame and subtract that value from all of the frame\u2019s sample values which ensures those samples are centered around 0.0 again. Also, in order to avoid \"gaps\" at the frame boundaries, the DC correction offset values will be interpolated smoothly between neighbouring frames. \n\n**altboundary, b**\n\n    Enable alternative boundary mode. By default is disabled. The Dynamic Audio Normalizer takes into account a certain neighbourhood around each frame. This includes the preceding frames as well as the subsequent frames. However, for the \"boundary\" frames, located at the very beginning and at the very end of the audio file, not all neighbouring frames are available. In particular, for the first few frames in the audio file, the preceding frames are not known. And, similarly, for the last few frames in the audio file, the subsequent frames are not known. Thus, the question arises which gain factors should be assumed for the missing frames in the \"boundary\" region. The Dynamic Audio Normalizer implements two modes to deal with this situation. The default boundary mode assumes a gain factor of exactly 1.0 for the missing frames, resulting in a smooth \"fade in\" and \"fade out\" at the beginning and at the end of the input, respectively. \n\n**compress, s**\n\n    Set the compress factor. In range from 0.0 to 30.0. Default is 0.0. By default, the Dynamic Audio Normalizer does not apply \"traditional\" compression. This means that signal peaks will not be pruned and thus the full dynamic range will be retained within each local neighbourhood. However, in some cases it may be desirable to combine the Dynamic Audio Normalizer\u2019s normalization algorithm with a more \"traditional\" compression. For this purpose, the Dynamic Audio Normalizer provides an optional compression (thresholding) function. If (and only if) the compression feature is enabled, all input frames will be processed by a soft knee thresholding function prior to the actual normalization process. Put simply, the thresholding function is going to prune all samples whose magnitude exceeds a certain threshold value. However, the Dynamic Audio Normalizer does not simply apply a fixed threshold value. Instead, the threshold value will be adjusted for each individual frame. In general, smaller parameters result in stronger compression, and vice versa. Values below 3.0 are not recommended, because audible distortion may appear. \n\n**threshold, t**\n\n    Set the target threshold value. This specifies the lowest permissible magnitude level for the audio input which will be normalized. If input frame volume is above this value frame will be normalized. Otherwise frame may not be normalized at all. The default value is set to 0, which means all input frames will be normalized. This option is mostly useful if digital noise is not wanted to be amplified. \n\n**channels, h**\n\n    Specify which channels to filter, by default all available channels are filtered. \n\n**overlap, o**\n\n    Specify overlap for frames. If set to 0 (default) no frame overlapping is done. Using >0 and <1 values will make less conservative gain adjustments, like when framelen option is set to smaller value, if framelen option value is compensated for non-zero overlap then gain adjustments will be smoother across time compared to zero overlap case. \n\n**curve, v**\n\n    Specify the peak mapping curve expression which is going to be used when calculating gain applied to frames. The max output frame gain will still be limited by other options mentioned previously for this filter. The expression can contain the following constants: ch current channel number sn current sample number nb_channels number of channels t timestamp expressed in seconds sr sample rate p current frame peak value \n\n",
  "filter_type": "af",
  "formula_input_typings": null,
  "formula_output_typings": null,
  "id": "ff_af_dynaudnorm",
  "input_stream_typings": [
    {
      "name": "default",
      "type": "AVMEDIA_TYPE_AUDIO"
    }
  ],
  "is_input_dynamic": false,
  "is_output_dynamic": false,
  "is_support_framesync": false,
  "is_support_timeline": true,
  "name": "dynaudnorm",
  "options": [
    {
      "alias": [
        "framelen",
        "f"
      ],
      "choices": [],
      "default": 500,
      "description": "set the frame length in msec",
      "name": "framelen",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "gausssize",
        "g"
      ],
      "choices": [],
      "default": 31,
      "description": "set the filter size",
      "name": "gausssize",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "peak",
        "p"
      ],
      "choices": [],
      "default": 0.95,
      "description": "set the peak value",
      "name": "peak",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "maxgain",
        "m"
      ],
      "choices": [],
      "default": 10.0,
      "description": "set the max amplification",
      "name": "maxgain",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "targetrms",
        "r"
      ],
      "choices": [],
      "default": 0.0,
      "description": "set the target RMS",
      "name": "targetrms",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "coupling",
        "n"
      ],
      "choices": [],
      "default": 1,
      "description": "set channel coupling",
      "name": "coupling",
      "required": false,
      "typing": "bool"
    },
    {
      "alias": [
        "correctdc",
        "c"
      ],
      "choices": [],
      "default": 0,
      "description": "set DC correction",
      "name": "correctdc",
      "required": false,
      "typing": "bool"
    },
    {
      "alias": [
        "altboundary",
        "b"
      ],
      "choices": [],
      "default": 0,
      "description": "set alternative boundary mode",
      "name": "altboundary",
      "required": false,
      "typing": "bool"
    },
    {
      "alias": [
        "compress",
        "s"
      ],
      "choices": [],
      "default": 0.0,
      "description": "set the compress factor",
      "name": "compress",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "threshold",
        "t"
      ],
      "choices": [],
      "default": 0.0,
      "description": "set the threshold value",
      "name": "threshold",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "channels",
        "h"
      ],
      "choices": [],
      "default": "all",
      "description": "set channels to filter",
      "name": "channels",
      "required": false,
      "typing": "str"
    },
    {
      "alias": [
        "overlap",
        "o"
      ],
      "choices": [],
      "default": 0.0,
      "description": "set the frame overlap",
      "name": "overlap",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "curve",
        "v"
      ],
      "choices": [],
      "default": "((void*)0)",
      "description": "set the custom peak mapping curve",
      "name": "curve",
      "required": false,
      "typing": "str"
    },
    {
      "alias": [],
      "choices": [],
      "default": null,
      "description": "timeline editing",
      "name": "enable",
      "required": false,
      "typing": "str"
    }
  ],
  "output_stream_typings": [
    {
      "name": "default",
      "type": "AVMEDIA_TYPE_AUDIO"
    }
  ],
  "ref": "https://ffmpeg.org/ffmpeg-filters.html#dynaudnorm"
}
