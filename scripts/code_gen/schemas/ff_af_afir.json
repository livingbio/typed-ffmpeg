{
  "description": "### 8.25 afir\n\nApply an arbitrary Finite Impulse Response filter.\n\n\nThis filter is designed for applying long FIR filters,\nup to 60 seconds long.\n\n\nIt can be used as component for digital crossover filters,\nroom equalization, cross talk cancellation, wavefield synthesis,\nauralization, ambiophonics, ambisonics and spatialization.\n\n\nThis filter uses the streams higher than first one as FIR coefficients.\nIf the non-first stream holds a single channel, it will be used\nfor all input channels in the first stream, otherwise\nthe number of channels in the non-first stream must be same as\nthe number of channels in the first stream.\n\n\nIt accepts the following parameters:\n\n\n- **`dry`**\n  - Set dry gain. This sets input gain.\n- **`wet`**\n  - Set wet gain. This sets final output gain.\n- **`length`**\n  - Set Impulse Response filter length. Default is 1, which means whole IR is processed.\n- **`gtype`**\n  - This option is deprecated, and does nothing.\n- **`irnorm`**\n  - Set norm to be applied to IR coefficients before filtering.\nAllowed range is from\n-1\nto\n2\n.\nIR coefficients are normalized with calculated vector norm set by this option.\nFor negative values, no norm is calculated, and IR coefficients are not modified at all.\nDefault is\n1\n.\n- **`irlink`**\n  - For multichannel IR if this option is set to\ntrue\n, all IR channels will be\nnormalized with maximal measured gain of all IR channels coefficients as set by\nirnorm\noption.\nWhen disabled, all IR coefficients in each IR channel will be normalized independently.\nDefault is\ntrue\n.\n- **`irgain`**\n  - Set gain to be applied to IR coefficients before filtering.\nAllowed range is 0 to 1. This gain is applied after any gain applied with\nirnorm\noption.\n- **`irfmt`**\n  - Set format of IR stream. Can be\nmono\nor\ninput\n.\nDefault is\ninput\n.\n- **`maxir`**\n  - Set max allowed Impulse Response filter duration in seconds. Default is 30 seconds.\nAllowed range is 0.1 to 60 seconds.\n- **`response`**\n  - This option is deprecated, and does nothing.\n- **`channel`**\n  - This option is deprecated, and does nothing.\n- **`size`**\n  - This option is deprecated, and does nothing.\n- **`rate`**\n  - This option is deprecated, and does nothing.\n- **`minp`**\n  - Set minimal partition size used for convolution. Default is\n8192\n.\nAllowed range is from\n1\nto\n65536\n.\nLower values decreases latency at cost of higher CPU usage.\n- **`maxp`**\n  - Set maximal partition size used for convolution. Default is\n8192\n.\nAllowed range is from\n8\nto\n65536\n.\nLower values may increase CPU usage.\n- **`nbirs`**\n  - Set number of input impulse responses streams which will be switchable at runtime.\nAllowed range is from\n1\nto\n32\n. Default is\n1\n.\n- **`ir`**\n  - Set IR stream which will be used for convolution, starting from\n0\n, should always be\nlower than supplied value by\nnbirs\noption. Default is\n0\n.\nThis option can be changed at runtime via\ncommands\n.\n- **`precision`**\n  - Set which precision to use when processing samples.\nauto\nAuto pick internal sample format depending on other filters.\nfloat\nAlways use single-floating point precision sample format.\ndouble\nAlways use double-floating point precision sample format.\nDefault value is auto.\n- **`irload`**\n  - Set when to load IR stream. Can be\ninit\nor\naccess\n.\nFirst one load and prepares all IRs on initialization, second one\nonce on first access of specific IR.\nDefault is\ninit\n.\nSet dry gain. This sets input gain.\n\n\nSet wet gain. This sets final output gain.\n\n\nSet Impulse Response filter length. Default is 1, which means whole IR is processed.\n\n\nThis option is deprecated, and does nothing.\n\n\nSet norm to be applied to IR coefficients before filtering.\nAllowed range is from -1 to 2.\nIR coefficients are normalized with calculated vector norm set by this option.\nFor negative values, no norm is calculated, and IR coefficients are not modified at all.\nDefault is 1.\n\n\nFor multichannel IR if this option is set to true, all IR channels will be\nnormalized with maximal measured gain of all IR channels coefficients as set by irnorm option.\nWhen disabled, all IR coefficients in each IR channel will be normalized independently.\nDefault is true.\n\n\nSet gain to be applied to IR coefficients before filtering.\nAllowed range is 0 to 1. This gain is applied after any gain applied with irnorm option.\n\n\nSet format of IR stream. Can be mono or input.\nDefault is input.\n\n\nSet max allowed Impulse Response filter duration in seconds. Default is 30 seconds.\nAllowed range is 0.1 to 60 seconds.\n\n\nThis option is deprecated, and does nothing.\n\n\nThis option is deprecated, and does nothing.\n\n\nThis option is deprecated, and does nothing.\n\n\nThis option is deprecated, and does nothing.\n\n\nSet minimal partition size used for convolution. Default is 8192.\nAllowed range is from 1 to 65536.\nLower values decreases latency at cost of higher CPU usage.\n\n\nSet maximal partition size used for convolution. Default is 8192.\nAllowed range is from 8 to 65536.\nLower values may increase CPU usage.\n\n\nSet number of input impulse responses streams which will be switchable at runtime.\nAllowed range is from 1 to 32. Default is 1.\n\n\nSet IR stream which will be used for convolution, starting from 0, should always be\nlower than supplied value by nbirs option. Default is 0.\nThis option can be changed at runtime via commands.\n\n\nSet which precision to use when processing samples.\n\n\n- **`auto`**\n  - Auto pick internal sample format depending on other filters.\n- **`float`**\n  - Always use single-floating point precision sample format.\n- **`double`**\n  - Always use double-floating point precision sample format.\nAuto pick internal sample format depending on other filters.\n\n\nAlways use single-floating point precision sample format.\n\n\nAlways use double-floating point precision sample format.\n\n\nDefault value is auto.\n\n\nSet when to load IR stream. Can be init or access.\nFirst one load and prepares all IRs on initialization, second one\nonce on first access of specific IR.\nDefault is init.\n\n\n",
  "filter_type": "af",
  "formula_input_typings": "[StreamType.audio] * nbirs",
  "formula_output_typings": null,
  "id": "ff_af_afir",
  "input_stream_typings": [],
  "is_input_dynamic": true,
  "is_output_dynamic": false,
  "name": "afir",
  "options": [
    {
      "alias": [
        "dry"
      ],
      "choices": [],
      "default": 1.0,
      "description": "<dd><p>Set dry gain. This sets input gain.\n</p>\n</dd>",
      "name": "dry",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "wet"
      ],
      "choices": [],
      "default": 1.0,
      "description": "<dd><p>Set wet gain. This sets final output gain.\n</p>\n</dd>",
      "name": "wet",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "length"
      ],
      "choices": [],
      "default": 1.0,
      "description": "<dd><p>Set Impulse Response filter length. Default is 1, which means whole IR is processed.\n</p>\n</dd>",
      "name": "length",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "gtype"
      ],
      "choices": [
        {
          "help": "without auto gain",
          "name": "none",
          "value": -1
        },
        {
          "help": "peak gain",
          "name": "peak",
          "value": 0
        },
        {
          "help": "DC gain",
          "name": "dc",
          "value": 1
        },
        {
          "help": "gain to noise",
          "name": "gn",
          "value": 2
        },
        {
          "help": "AC gain",
          "name": "ac",
          "value": 3
        },
        {
          "help": "RMS gain",
          "name": "rms",
          "value": 4
        }
      ],
      "default": 0,
      "description": "<dd><p>This option is deprecated, and does nothing.\n</p>\n</dd>",
      "name": "gtype",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "irnorm"
      ],
      "choices": [],
      "default": 1.0,
      "description": "<dd><p>Set norm to be applied to IR coefficients before filtering.\nAllowed range is from <var>-1</var> to <var>2</var>.\nIR coefficients are normalized with calculated vector norm set by this option.\nFor negative values, no norm is calculated, and IR coefficients are not modified at all.\nDefault is <var>1</var>.\n</p>\n</dd>",
      "name": "irnorm",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "irlink"
      ],
      "choices": [],
      "default": 1,
      "description": "<dd><p>For multichannel IR if this option is set to <var>true</var>, all IR channels will be\nnormalized with maximal measured gain of all IR channels coefficients as set by <code>irnorm</code> option.\nWhen disabled, all IR coefficients in each IR channel will be normalized independently.\nDefault is <var>true</var>.\n</p>\n</dd>",
      "name": "irlink",
      "required": false,
      "typing": "bool"
    },
    {
      "alias": [
        "irgain"
      ],
      "choices": [],
      "default": 1.0,
      "description": "<dd><p>Set gain to be applied to IR coefficients before filtering.\nAllowed range is 0 to 1. This gain is applied after any gain applied with <var>irnorm</var> option.\n</p>\n</dd>",
      "name": "irgain",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "irfmt"
      ],
      "choices": [
        {
          "help": "single channel",
          "name": "mono",
          "value": 0
        },
        {
          "help": "same as input",
          "name": "input",
          "value": 1
        }
      ],
      "default": 1,
      "description": "<dd><p>Set format of IR stream. Can be <code>mono</code> or <code>input</code>.\nDefault is <code>input</code>.\n</p>\n</dd>",
      "name": "irfmt",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "maxir"
      ],
      "choices": [],
      "default": 30.0,
      "description": "<dd><p>Set max allowed Impulse Response filter duration in seconds. Default is 30 seconds.\nAllowed range is 0.1 to 60 seconds.\n</p>\n</dd>",
      "name": "maxir",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "response"
      ],
      "choices": [],
      "default": 0,
      "description": "<dd><p>This option is deprecated, and does nothing.\n</p>\n</dd>",
      "name": "response",
      "required": false,
      "typing": "bool"
    },
    {
      "alias": [
        "channel"
      ],
      "choices": [],
      "default": 0,
      "description": "<dd><p>This option is deprecated, and does nothing.\n</p>\n</dd>",
      "name": "channel",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "size"
      ],
      "choices": [],
      "default": "hd720",
      "description": "<dd><p>This option is deprecated, and does nothing.\n</p>\n</dd>",
      "name": "size",
      "required": false,
      "typing": "str"
    },
    {
      "alias": [
        "rate"
      ],
      "choices": [],
      "default": "25",
      "description": "<dd><p>This option is deprecated, and does nothing.\n</p>\n</dd>",
      "name": "rate",
      "required": false,
      "typing": "str"
    },
    {
      "alias": [
        "minp"
      ],
      "choices": [],
      "default": 8192,
      "description": "<dd><p>Set minimal partition size used for convolution. Default is <var>8192</var>.\nAllowed range is from <var>1</var> to <var>65536</var>.\nLower values decreases latency at cost of higher CPU usage.\n</p>\n</dd>",
      "name": "minp",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "maxp"
      ],
      "choices": [],
      "default": 8192,
      "description": "<dd><p>Set maximal partition size used for convolution. Default is <var>8192</var>.\nAllowed range is from <var>8</var> to <var>65536</var>.\nLower values may increase CPU usage.\n</p>\n</dd>",
      "name": "maxp",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "nbirs"
      ],
      "choices": [],
      "default": 1,
      "description": "<dd><p>Set number of input impulse responses streams which will be switchable at runtime.\nAllowed range is from <var>1</var> to <var>32</var>. Default is <var>1</var>.\n</p>\n</dd>",
      "name": "nbirs",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "ir"
      ],
      "choices": [],
      "default": 0,
      "description": "<dd><p>Set IR stream which will be used for convolution, starting from <var>0</var>, should always be\nlower than supplied value by <code>nbirs</code> option. Default is <var>0</var>.\nThis option can be changed at runtime via <a href=\"#commands\">commands</a>.\n</p>\n</dd>",
      "name": "ir",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "precision"
      ],
      "choices": [
        {
          "help": "set auto processing precision",
          "name": "auto",
          "value": 0
        },
        {
          "help": "set single-floating point processing precision",
          "name": "float",
          "value": 1
        },
        {
          "help": "set double-floating point processing precision",
          "name": "double",
          "value": 2
        }
      ],
      "default": 0,
      "description": "<dd><p>Set which precision to use when processing samples.\n</p>\n<dl compact=\"compact\">\n<dt><samp>auto</samp></dt>\n<dd><p>Auto pick internal sample format depending on other filters.\n</p>\n</dd>\n<dt><samp>float</samp></dt>\n<dd><p>Always use single-floating point precision sample format.\n</p>\n</dd>\n<dt><samp>double</samp></dt>\n<dd><p>Always use double-floating point precision sample format.\n</p></dd>\n</dl>\n<p>Default value is auto.\n</p>\n</dd>",
      "name": "precision",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "irload"
      ],
      "choices": [
        {
          "help": "load all IRs on init",
          "name": "init",
          "value": 0
        },
        {
          "help": "load IR on access",
          "name": "access",
          "value": 1
        }
      ],
      "default": 0,
      "description": "<dd><p>Set when to load IR stream. Can be <code>init</code> or <code>access</code>.\nFirst one load and prepares all IRs on initialization, second one\nonce on first access of specific IR.\nDefault is <code>init</code>.\n</p></dd>",
      "name": "irload",
      "required": false,
      "typing": "int"
    }
  ],
  "output_stream_typings": [
    {
      "name": "default",
      "type": "AVMEDIA_TYPE_AUDIO"
    }
  ],
  "ref": "https://ffmpeg.org/ffmpeg-filters.html#afir"
}
