{
  "description": "### 11.18 bm3d\n\nDenoise frames using Block-Matching 3D algorithm.\n\n\nThe filter accepts the following options.\n\n\n- **`sigma`**\n  - Set denoising strength. Default value is 1.\nAllowed range is from 0 to 999.9.\nThe denoising algorithm is very sensitive to sigma, so adjust it\naccording to the source.\n- **`block`**\n  - Set local patch size. This sets dimensions in 2D.\n- **`bstep`**\n  - Set sliding step for processing blocks. Default value is 4.\nAllowed range is from 1 to 64.\nSmaller values allows processing more reference blocks and is slower.\n- **`group`**\n  - Set maximal number of similar blocks for 3rd dimension. Default value is 1.\nWhen set to 1, no block matching is done. Larger values allows more blocks\nin single group.\nAllowed range is from 1 to 256.\n- **`range`**\n  - Set radius for search block matching. Default is 9.\nAllowed range is from 1 to INT32_MAX.\n- **`mstep`**\n  - Set step between two search locations for block matching. Default is 1.\nAllowed range is from 1 to 64. Smaller is slower.\n- **`thmse`**\n  - Set threshold of mean square error for block matching. Valid range is 0 to\nINT32_MAX.\n- **`hdthr`**\n  - Set thresholding parameter for hard thresholding in 3D transformed domain.\nLarger values results in stronger hard-thresholding filtering in frequency\ndomain.\n- **`estim`**\n  - Set filtering estimation mode. Can be\nbasic\nor\nfinal\n.\nDefault is\nbasic\n.\n- **`ref`**\n  - If enabled, filter will use 2nd stream for block matching.\nDefault is disabled for\nbasic\nvalue of\nestim\noption,\nand always enabled if value of\nestim\nis\nfinal\n.\n- **`planes`**\n  - Set planes to filter. Default is all available except alpha.\nSet denoising strength. Default value is 1.\nAllowed range is from 0 to 999.9.\nThe denoising algorithm is very sensitive to sigma, so adjust it\naccording to the source.\n\n\nSet local patch size. This sets dimensions in 2D.\n\n\nSet sliding step for processing blocks. Default value is 4.\nAllowed range is from 1 to 64.\nSmaller values allows processing more reference blocks and is slower.\n\n\nSet maximal number of similar blocks for 3rd dimension. Default value is 1.\nWhen set to 1, no block matching is done. Larger values allows more blocks\nin single group.\nAllowed range is from 1 to 256.\n\n\nSet radius for search block matching. Default is 9.\nAllowed range is from 1 to INT32_MAX.\n\n\nSet step between two search locations for block matching. Default is 1.\nAllowed range is from 1 to 64. Smaller is slower.\n\n\nSet threshold of mean square error for block matching. Valid range is 0 to\nINT32_MAX.\n\n\nSet thresholding parameter for hard thresholding in 3D transformed domain.\nLarger values results in stronger hard-thresholding filtering in frequency\ndomain.\n\n\nSet filtering estimation mode. Can be basic or final.\nDefault is basic.\n\n\nIf enabled, filter will use 2nd stream for block matching.\nDefault is disabled for basic value of estim option,\nand always enabled if value of estim is final.\n\n\nSet planes to filter. Default is all available except alpha.\n\n\n",
  "filter_type": "vf",
  "formula_input_typings": "[StreamType.video] + [StreamType.video] if ref else []",
  "formula_output_typings": null,
  "id": "ff_vf_bm3d",
  "input_stream_typings": [],
  "is_input_dynamic": true,
  "is_output_dynamic": false,
  "name": "bm3d",
  "options": [
    {
      "alias": [
        "sigma"
      ],
      "choices": [],
      "default": 1.0,
      "description": "<dd><p>Set denoising strength. Default value is 1.\nAllowed range is from 0 to 999.9.\nThe denoising algorithm is very sensitive to sigma, so adjust it\naccording to the source.\n</p>\n</dd>",
      "name": "sigma",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "block"
      ],
      "choices": [],
      "default": 16,
      "description": "<dd><p>Set local patch size. This sets dimensions in 2D.\n</p>\n</dd>",
      "name": "block",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "bstep"
      ],
      "choices": [],
      "default": 4,
      "description": "<dd><p>Set sliding step for processing blocks. Default value is 4.\nAllowed range is from 1 to 64.\nSmaller values allows processing more reference blocks and is slower.\n</p>\n</dd>",
      "name": "bstep",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "group"
      ],
      "choices": [],
      "default": 1,
      "description": "<dd><p>Set maximal number of similar blocks for 3rd dimension. Default value is 1.\nWhen set to 1, no block matching is done. Larger values allows more blocks\nin single group.\nAllowed range is from 1 to 256.\n</p>\n</dd>",
      "name": "group",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "range"
      ],
      "choices": [],
      "default": 9,
      "description": "<dd><p>Set radius for search block matching. Default is 9.\nAllowed range is from 1 to INT32_MAX.\n</p>\n</dd>",
      "name": "range",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "mstep"
      ],
      "choices": [],
      "default": 1,
      "description": "<dd><p>Set step between two search locations for block matching. Default is 1.\nAllowed range is from 1 to 64. Smaller is slower.\n</p>\n</dd>",
      "name": "mstep",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "thmse"
      ],
      "choices": [],
      "default": 0.0,
      "description": "<dd><p>Set threshold of mean square error for block matching. Valid range is 0 to\nINT32_MAX.\n</p>\n</dd>",
      "name": "thmse",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "hdthr"
      ],
      "choices": [],
      "default": 2.7,
      "description": "<dd><p>Set thresholding parameter for hard thresholding in 3D transformed domain.\nLarger values results in stronger hard-thresholding filtering in frequency\ndomain.\n</p>\n</dd>",
      "name": "hdthr",
      "required": false,
      "typing": "float"
    },
    {
      "alias": [
        "estim"
      ],
      "choices": [
        {
          "help": "basic estimate",
          "name": "basic",
          "value": "BASIC"
        },
        {
          "help": "final estimate",
          "name": "final",
          "value": "FINAL"
        }
      ],
      "default": "BASIC",
      "description": "<dd><p>Set filtering estimation mode. Can be <code>basic</code> or <code>final</code>.\nDefault is <code>basic</code>.\n</p>\n</dd>",
      "name": "estim",
      "required": false,
      "typing": "int"
    },
    {
      "alias": [
        "ref"
      ],
      "choices": [],
      "default": 0,
      "description": "<dd><p>If enabled, filter will use 2nd stream for block matching.\nDefault is disabled for <code>basic</code> value of <var>estim</var> option,\nand always enabled if value of <var>estim</var> is <code>final</code>.\n</p>\n</dd>",
      "name": "ref",
      "required": false,
      "typing": "bool"
    },
    {
      "alias": [
        "planes"
      ],
      "choices": [],
      "default": 7,
      "description": "<dd><p>Set planes to filter. Default is all available except alpha.\n</p></dd>",
      "name": "planes",
      "required": false,
      "typing": "int"
    }
  ],
  "output_stream_typings": [
    {
      "name": "default",
      "type": "AVMEDIA_TYPE_VIDEO"
    }
  ],
  "ref": "https://ffmpeg.org/ffmpeg-filters.html#bm3d"
}
