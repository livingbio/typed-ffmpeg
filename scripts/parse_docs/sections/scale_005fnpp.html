<h3 class="section"><a href="#toc-scale_005fnpp-1">11.217 scale_npp</a></h3>

<p>Use the NVIDIA Performance Primitives (libnpp) to perform scaling and/or pixel
format conversion on CUDA video frames. Setting the output width and height
works in the same way as for the <var>scale</var> filter.
</p>
<p>The following additional options are accepted:
</p><dl compact="compact">
<dt><samp>format</samp></dt>
<dd><p>The pixel format of the output CUDA frames. If set to the string &quot;same&quot; (the
default), the input format will be kept. Note that automatic format negotiation
and conversion is not yet supported for hardware frames
</p>
</dd>
<dt><samp>interp_algo</samp></dt>
<dd><p>The interpolation algorithm used for resizing. One of the following:
</p><dl compact="compact">
<dt><samp>nn</samp></dt>
<dd><p>Nearest neighbour.
</p>
</dd>
<dt><samp>linear</samp></dt>
<dt><samp>cubic</samp></dt>
<dt><samp>cubic2p_bspline</samp></dt>
<dd><p>2-parameter cubic (B=1, C=0)
</p>
</dd>
<dt><samp>cubic2p_catmullrom</samp></dt>
<dd><p>2-parameter cubic (B=0, C=1/2)
</p>
</dd>
<dt><samp>cubic2p_b05c03</samp></dt>
<dd><p>2-parameter cubic (B=1/2, C=3/10)
</p>
</dd>
<dt><samp>super</samp></dt>
<dd><p>Supersampling
</p>
</dd>
<dt><samp>lanczos</samp></dt>
</dl>

</dd>
<dt><samp>force_original_aspect_ratio</samp></dt>
<dd><p>Enable decreasing or increasing output video width or height if necessary to
keep the original aspect ratio. Possible values:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>disable</samp>&rsquo;</dt>
<dd><p>Scale the video as specified and disable this feature.
</p>
</dd>
<dt>&lsquo;<samp>decrease</samp>&rsquo;</dt>
<dd><p>The output video dimensions will automatically be decreased if needed.
</p>
</dd>
<dt>&lsquo;<samp>increase</samp>&rsquo;</dt>
<dd><p>The output video dimensions will automatically be increased if needed.
</p>
</dd>
</dl>

<p>One useful instance of this option is that when you know a specific device&rsquo;s
maximum allowed resolution, you can use this to limit the output video to
that, while retaining the aspect ratio. For example, device A allows
1280x720 playback, and your video is 1920x800. Using this option (set it to
decrease) and specifying 1280x720 to the command line makes the output
1280x533.
</p>
<p>Please note that this is a different thing than specifying -1 for <samp>w</samp>
or <samp>h</samp>, you still need to specify the output resolution for this option
to work.
</p>
</dd>
<dt><samp>force_divisible_by</samp></dt>
<dd><p>Ensures that both the output dimensions, width and height, are divisible by the
given integer when used together with <samp>force_original_aspect_ratio</samp>. This
works similar to using <code>-n</code> in the <samp>w</samp> and <samp>h</samp> options.
</p>
<p>This option respects the value set for <samp>force_original_aspect_ratio</samp>,
increasing or decreasing the resolution accordingly. The video&rsquo;s aspect ratio
may be slightly modified.
</p>
<p>This option can be handy if you need to have a video fit within or exceed
a defined resolution using <samp>force_original_aspect_ratio</samp> but also have
encoder restrictions on width or height divisibility.
</p>
</dd>
<dt><samp>eval</samp></dt>
<dd><p>Specify when to evaluate <var>width</var> and <var>height</var> expression. It accepts the following values:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>init</samp>&rsquo;</dt>
<dd><p>Only evaluate expressions once during the filter initialization or when a command is processed.
</p>
</dd>
<dt>&lsquo;<samp>frame</samp>&rsquo;</dt>
<dd><p>Evaluate expressions for each incoming frame.
</p>
</dd>
</dl>

</dd>
</dl>

<p>The values of the <samp>w</samp> and <samp>h</samp> options are expressions
containing the following constants:
</p>
<dl compact="compact">
<dt><var>in_w</var></dt>
<dt><var>in_h</var></dt>
<dd><p>The input width and height
</p>
</dd>
<dt><var>iw</var></dt>
<dt><var>ih</var></dt>
<dd><p>These are the same as <var>in_w</var> and <var>in_h</var>.
</p>
</dd>
<dt><var>out_w</var></dt>
<dt><var>out_h</var></dt>
<dd><p>The output (scaled) width and height
</p>
</dd>
<dt><var>ow</var></dt>
<dt><var>oh</var></dt>
<dd><p>These are the same as <var>out_w</var> and <var>out_h</var>
</p>
</dd>
<dt><var>a</var></dt>
<dd><p>The same as <var>iw</var> / <var>ih</var>
</p>
</dd>
<dt><var>sar</var></dt>
<dd><p>input sample aspect ratio
</p>
</dd>
<dt><var>dar</var></dt>
<dd><p>The input display aspect ratio. Calculated from <code>(iw / ih) * sar</code>.
</p>
</dd>
<dt><var>n</var></dt>
<dd><p>The (sequential) number of the input frame, starting from 0.
Only available with <code>eval=frame</code>.
</p>
</dd>
<dt><var>t</var></dt>
<dd><p>The presentation timestamp of the input frame, expressed as a number of
seconds. Only available with <code>eval=frame</code>.
</p>
</dd>
<dt><var>pos</var></dt>
<dd><p>The position (byte offset) of the frame in the input stream, or NaN if
this information is unavailable and/or meaningless (for example in case of synthetic video).
Only available with <code>eval=frame</code>.
Deprecated, do not use.
</p></dd>
</dl>
