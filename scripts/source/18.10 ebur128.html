<h3 class="section"><a href="#toc-ebur128-1">18.10 ebur128</a></h3>

<p>EBU R128 scanner filter. This filter takes an audio stream and analyzes its loudness
level. By default, it logs a message at a frequency of 10Hz with the
Momentary loudness (identified by <code>M</code>), Short-term loudness (<code>S</code>),
Integrated loudness (<code>I</code>) and Loudness Range (<code>LRA</code>).
</p>
<p>The filter can only analyze streams which have
sample format is double-precision floating point. The input stream will be converted to
this specification, if needed. Users may need to insert aformat and/or aresample filters
after this filter to obtain the original parameters.
</p>
<p>The filter also has a video output (see the <var>video</var> option) with a real
time graph to observe the loudness evolution. The graphic contains the logged
message mentioned above, so it is not printed anymore when this option is set,
unless the verbose logging is set. The main graphing area contains the
short-term loudness (3 seconds of analysis), and the gauge on the right is for
the momentary loudness (400 milliseconds), but can optionally be configured
to instead display short-term loudness (see <var>gauge</var>).
</p>
<p>The green area marks a  +/- 1LU target range around the target loudness
(-23LUFS by default, unless modified through <var>target</var>).
</p>
<p>More information about the Loudness Recommendation EBU R128 on
<a href="http://tech.ebu.ch/loudness">http://tech.ebu.ch/loudness</a>.
</p>
<p>The filter accepts the following options:
</p>
<dl compact="compact">
<dt><samp>video</samp></dt>
<dd><p>Activate the video output. The audio stream is passed unchanged whether this
option is set or no. The video stream will be the first output stream if
activated. Default is <code>0</code>.
</p>
</dd>
<dt><samp>size</samp></dt>
<dd><p>Set the video size. This option is for video only. For the syntax of this
option, check the
<a href="ffmpeg-utils.html#video-size-syntax">(ffmpeg-utils)&quot;Video size&quot; section in the ffmpeg-utils manual</a>.
Default and minimum resolution is <code>640x480</code>.
</p>
</dd>
<dt><samp>meter</samp></dt>
<dd><p>Set the EBU scale meter. Default is <code>9</code>. Common values are <code>9</code> and
<code>18</code>, respectively for EBU scale meter +9 and EBU scale meter +18. Any
other integer value between this range is allowed.
</p>
</dd>
<dt><samp>metadata</samp></dt>
<dd><p>Set metadata injection. If set to <code>1</code>, the audio input will be segmented
into 100ms output frames, each of them containing various loudness information
in metadata.  All the metadata keys are prefixed with <code>lavfi.r128.</code>.
</p>
<p>Default is <code>0</code>.
</p>
</dd>
<dt><samp>framelog</samp></dt>
<dd><p>Force the frame logging level.
</p>
<p>Available values are:
</p><dl compact="compact">
<dt>&lsquo;<samp>quiet</samp>&rsquo;</dt>
<dd><p>logging disabled
</p></dd>
<dt>&lsquo;<samp>info</samp>&rsquo;</dt>
<dd><p>information logging level
</p></dd>
<dt>&lsquo;<samp>verbose</samp>&rsquo;</dt>
<dd><p>verbose logging level
</p></dd>
</dl>

<p>By default, the logging level is set to <var>info</var>. If the <samp>video</samp> or
the <samp>metadata</samp> options are set, it switches to <var>verbose</var>.
</p>
</dd>
<dt><samp>peak</samp></dt>
<dd><p>Set peak mode(s).
</p>
<p>Available modes can be cumulated (the option is a <code>flag</code> type). Possible
values are:
</p><dl compact="compact">
<dt>&lsquo;<samp>none</samp>&rsquo;</dt>
<dd><p>Disable any peak mode (default).
</p></dd>
<dt>&lsquo;<samp>sample</samp>&rsquo;</dt>
<dd><p>Enable sample-peak mode.
</p>
<p>Simple peak mode looking for the higher sample value. It logs a message
for sample-peak (identified by <code>SPK</code>).
</p></dd>
<dt>&lsquo;<samp>true</samp>&rsquo;</dt>
<dd><p>Enable true-peak mode.
</p>
<p>If enabled, the peak lookup is done on an over-sampled version of the input
stream for better peak accuracy. It logs a message for true-peak.
(identified by <code>TPK</code>) and true-peak per frame (identified by <code>FTPK</code>).
This mode requires a build with <code>libswresample</code>.
</p></dd>
</dl>

</dd>
<dt><samp>dualmono</samp></dt>
<dd><p>Treat mono input files as &quot;dual mono&quot;. If a mono file is intended for playback
on a stereo system, its EBU R128 measurement will be perceptually incorrect.
If set to <code>true</code>, this option will compensate for this effect.
Multi-channel input files are not affected by this option.
</p>
</dd>
<dt><samp>panlaw</samp></dt>
<dd><p>Set a specific pan law to be used for the measurement of dual mono files.
This parameter is optional, and has a default value of -3.01dB.
</p>
</dd>
<dt><samp>target</samp></dt>
<dd><p>Set a specific target level (in LUFS) used as relative zero in the visualization.
This parameter is optional and has a default value of -23LUFS as specified
by EBU R128. However, material published online may prefer a level of -16LUFS
(e.g. for use with podcasts or video platforms).
</p>
</dd>
<dt><samp>gauge</samp></dt>
<dd><p>Set the value displayed by the gauge. Valid values are <code>momentary</code> and s
<code>shortterm</code>. By default the momentary value will be used, but in certain
scenarios it may be more useful to observe the short term value instead (e.g.
live mixing).
</p>
</dd>
<dt><samp>scale</samp></dt>
<dd><p>Sets the display scale for the loudness. Valid parameters are <code>absolute</code>
(in LUFS) or <code>relative</code> (LU) relative to the target. This only affects the
video output, not the summary or continuous log output.
</p>
</dd>
<dt><samp>integrated</samp></dt>
<dd><p>Read-only exported value for measured integrated loudness, in LUFS.
</p>
</dd>
<dt><samp>range</samp></dt>
<dd><p>Read-only exported value for measured loudness range, in LU.
</p>
</dd>
<dt><samp>lra_low</samp></dt>
<dd><p>Read-only exported value for measured LRA low, in LUFS.
</p>
</dd>
<dt><samp>lra_high</samp></dt>
<dd><p>Read-only exported value for measured LRA high, in LUFS.
</p>
</dd>
<dt><samp>sample_peak</samp></dt>
<dd><p>Read-only exported value for measured sample peak, in dBFS.
</p>
</dd>
<dt><samp>true_peak</samp></dt>
<dd><p>Read-only exported value for measured true peak, in dBFS.
</p></dd>
</dl>
