{
  "description": "11.1 addroi\nMark a region of interest in a video frame.\n\nThe frame data is passed through unchanged, but metadata is attached\nto the frame indicating regions of interest which can affect the\nbehaviour of later encoding.  Multiple regions can be marked by\napplying the filter multiple times.",
  "json_schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "additionalProperties": false,
    "properties": {
      "clear": {
        "description": "If set to true, remove any existing regions of interest marked on the frame before adding the new one.",
        "type": "boolean"
      },
      "h": {
        "description": "Region height in pixels.",
        "examples": [
          "150",
          "ih/4"
        ],
        "type": "string"
      },
      "qoffset": {
        "description": "Quantisation offset to apply within the region.",
        "examples": [
          -0.5,
          0,
          0.5
        ],
        "maximum": 1,
        "minimum": -1,
        "type": "number"
      },
      "w": {
        "description": "Region width in pixels.",
        "examples": [
          "200",
          "iw/4"
        ],
        "type": "string"
      },
      "x": {
        "description": "Region distance in pixels from the left edge of the frame.",
        "examples": [
          "100",
          "iw/2"
        ],
        "type": "string"
      },
      "y": {
        "description": "Region distance in pixels from the top edge of the frame.",
        "examples": [
          "50",
          "ih/2"
        ],
        "type": "string"
      }
    },
    "required": [
      "x",
      "y",
      "w",
      "h",
      "qoffset"
    ],
    "title": "addroi options",
    "type": "object"
  },
  "name": "addroi",
  "parameters": [
    {
      "description": "<dd><p>Region distance in pixels from the left edge of the frame.\n</p></dd>",
      "name": "x"
    },
    {
      "description": "<dd><p>Region distance in pixels from the top edge of the frame.\n</p></dd>",
      "name": "y"
    },
    {
      "description": "<dd><p>Region width in pixels.\n</p></dd>",
      "name": "w"
    },
    {
      "description": "<dd><p>Region height in pixels.\n</p>\n<p>The parameters <var>x</var>, <var>y</var>, <var>w</var> and <var>h</var> are expressions,\nand may contain the following variables:\n</p><dl compact=\"compact\">\n<dt><samp>iw</samp></dt>\n<dd><p>Width of the input frame.\n</p></dd>\n<dt><samp>ih</samp></dt>\n<dd><p>Height of the input frame.\n</p></dd>\n</dl>\n</dd>",
      "name": "h"
    },
    {
      "description": "<dd><p>Quantisation offset to apply within the region.\n</p>\n<p>This must be a real value in the range -1 to +1.  A value of zero\nindicates no quality change.  A negative value asks for better quality\n(less quantisation), while a positive value asks for worse quality\n(greater quantisation).\n</p>\n<p>The range is calibrated so that the extreme values indicate the\nlargest possible offset - if the rest of the frame is encoded with the\nworst possible quality, an offset of -1 indicates that this region\nshould be encoded with the best possible quality anyway.  Intermediate\nvalues are then interpolated in some codec-dependent way.\n</p>\n<p>For example, in 10-bit H.264 the quantisation parameter varies between\n-12 and 51.  A typical qoffset value of -1/10 therefore indicates that\nthis region should be encoded with a QP around one-tenth of the full\nrange better than the rest of the frame.  So, if most of the frame\nwere to be encoded with a QP of around 30, this region would get a QP\nof around 24 (an offset of approximately -1/10 * (51 - -12) = -6.3).\nAn extreme value of -1 would indicate that this region should be\nencoded with the best possible quality regardless of the treatment of\nthe rest of the frame - that is, should be encoded at a QP of -12.\n</p></dd>",
      "name": "qoffset"
    },
    {
      "description": "<dd><p>If set to true, remove any existing regions of interest marked on the\nframe before adding the new one.\n</p></dd>",
      "name": "clear"
    }
  ],
  "ref": "https://ffmpeg.org/ffmpeg-filters.html#addroi",
  "source": "<h3 class=\"section\"><a href=\"#toc-addroi\">11.1 addroi</a></h3>\n\n<p>Mark a region of interest in a video frame.\n</p>\n<p>The frame data is passed through unchanged, but metadata is attached\nto the frame indicating regions of interest which can affect the\nbehaviour of later encoding.  Multiple regions can be marked by\napplying the filter multiple times.\n</p>\n<dl compact=\"compact\">\n<dt><samp>x</samp></dt>\n<dd><p>Region distance in pixels from the left edge of the frame.\n</p></dd>\n<dt><samp>y</samp></dt>\n<dd><p>Region distance in pixels from the top edge of the frame.\n</p></dd>\n<dt><samp>w</samp></dt>\n<dd><p>Region width in pixels.\n</p></dd>\n<dt><samp>h</samp></dt>\n<dd><p>Region height in pixels.\n</p>\n<p>The parameters <var>x</var>, <var>y</var>, <var>w</var> and <var>h</var> are expressions,\nand may contain the following variables:\n</p><dl compact=\"compact\">\n<dt><samp>iw</samp></dt>\n<dd><p>Width of the input frame.\n</p></dd>\n<dt><samp>ih</samp></dt>\n<dd><p>Height of the input frame.\n</p></dd>\n</dl>\n\n</dd>\n<dt><samp>qoffset</samp></dt>\n<dd><p>Quantisation offset to apply within the region.\n</p>\n<p>This must be a real value in the range -1 to +1.  A value of zero\nindicates no quality change.  A negative value asks for better quality\n(less quantisation), while a positive value asks for worse quality\n(greater quantisation).\n</p>\n<p>The range is calibrated so that the extreme values indicate the\nlargest possible offset - if the rest of the frame is encoded with the\nworst possible quality, an offset of -1 indicates that this region\nshould be encoded with the best possible quality anyway.  Intermediate\nvalues are then interpolated in some codec-dependent way.\n</p>\n<p>For example, in 10-bit H.264 the quantisation parameter varies between\n-12 and 51.  A typical qoffset value of -1/10 therefore indicates that\nthis region should be encoded with a QP around one-tenth of the full\nrange better than the rest of the frame.  So, if most of the frame\nwere to be encoded with a QP of around 30, this region would get a QP\nof around 24 (an offset of approximately -1/10 * (51 - -12) = -6.3).\nAn extreme value of -1 would indicate that this region should be\nencoded with the best possible quality regardless of the treatment of\nthe rest of the frame - that is, should be encoded at a QP of -12.\n</p></dd>\n<dt><samp>clear</samp></dt>\n<dd><p>If set to true, remove any existing regions of interest marked on the\nframe before adding the new one.\n</p></dd>\n</dl>\n\n"
}
